
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://maharavansundaram.github.io/GITHUB_WORK/">
      
      
      
      
      <link rel="icon" href="assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>COINES Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="COINES Documentation" class="md-header__button md-logo" aria-label="COINES Documentation" data-md-component="logo">
      
  <img src="assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            COINES Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MaharavanSundaram/GITHUB_WORK" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="COINES Documentation" class="md-nav__button md-logo" aria-label="COINES Documentation" data-md-component="logo">
      
  <img src="assets/logo.svg" alt="logo">

    </a>
    COINES Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MaharavanSundaram/GITHUB_WORK" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/MaharavanSundaram/GITHUB_WORK/edit/main/doc/docs/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>Bosch Sensortec offers a toolkit for evaluation of it's sensor
products.The toolkit consists of 3 elements:</p>
<ol>
<li>
<p><strong>Engineering board</strong>: <a href="https://www.bosch-sensortec.com/bst/support_tools/application_boards/overview_application_boards">Application
    Board</a>
    named APP2.0 and APP3.x in this document, serves as interface
    translator from the sensor interface (I<sup>2</sup>C or SPI) to a USB
    interface, allowing PC software to communicate with the sensor on
    the shuttle board. <a href="https://store.arduino.cc/products/nicla-sense-me">Nicla Sense
    ME</a> board combines
    four state-of-the-art sensors from Bosch Sensortec (BHI260AP,
    BMP390, BMM150 and BME688) in the Arduino ecosystem.</p>
<p><figure>
<div class="center">
<p><img src="coinesAPI_images/APP20-APP20.png" style="width:50.0%"
alt="image" /> <img src="coinesAPI_images/APP30.png" style="width:40.0%"
alt="image" /> <img src="coinesAPI_images/APP31.png" style="width:40.0%"
alt="image" /> <img src="coinesAPI_images/NiclaSenseME.jpg"
style="width:40.0%" alt="image" /></p>
</div>
<figcaption>Application Board 2.0/3.0/3.1/Nicla Sense ME</figcaption>
</figure></p>
</li>
<li>
<p><strong>Sensor Shuttle board</strong>: A sensor specific shuttle board also known
    as breakout board is a PCB with the sensor mounted on it. The
    shuttle board allows easy access to the sensor pins via a simple
    socket and can be directly plugged into the Bosch Sensortec's
    Application boards. APP3.x shuttle boards also known as mini shuttle
    boards has smaller form factor when compared with APP2.0 shuttle
    board.</p>
<p><figure>
<div class="center">
<p><img src="coinesAPI_images/BMA222E_1.png" style="width:35.0%"
alt="image" /> <img src="coinesAPI_images/BMA423.png"
style="width:45.0%" alt="image" /></p>
</div>
<figcaption>APP2.0/3.x sensor shuttle board</figcaption>
</figure></p>
</li>
<li>
<p><strong>COINES</strong>: COINES provides a low-level interface for communication
    with Bosch Sensortec's Engineering boards enabling access to their
    MEMS sensors through sample applications and SensorAPI. For detailed
    description, refer to sections below.</p>
</li>
</ol>
<h1 id="introduction-to-coines">Introduction to COINES<a class="headerlink" href="#introduction-to-coines" title="Permanent link">&para;</a></h1>
<p>COINES (\"<strong>CO</strong>mmunication with <strong>IN</strong>ertial and <strong>E</strong>nvironmental
<strong>S</strong>ensors\") is an SDK (Software Development Kit), implemented in C as
a programming language that provides a low-level interface to Bosch
Sensortec's Engineering Boards. The user can access Bosch Sensortec's
MEMS sensors through this C interface. COINES can be used with the
SensorAPI of the sensor which is available at
<a href="https://github.com/BoschSensortec">https://github.com/BoschSensortec</a>. The user can modify, compile and
run the sample applications in COINES SDK and SensorAPI.</p>
<p>The full working environment consists of:</p>
<ul>
<li>
<p>A Bosch Sensortec MEMS sensor on a shuttle board mounted on the
    socket of Bosch Sensortec's Application board APP2.0/APP3.x</p>
</li>
<li>
<p>Windows, Linux or Mac PC to which the Engineering Board is connected
    via USB or BLE.</p>
</li>
<li>
<p>The release of the COINES software is available at
    <a href="https://www.bosch-sensortec.com/software-tools/tools/coines/">https://www.bosch-sensortec.com/software-tools/tools/coines/</a></p>
</li>
<li>
<p>C compiler is also required (for details, see sections below)</p>
</li>
</ul>
<h1 id="coines-usage">COINES usage<a class="headerlink" href="#coines-usage" title="Permanent link">&para;</a></h1>
<p>The following diagram represents COINES usage.</p>
<figure>
<div class="center">
<img src="coinesAPI_images/COINES_block_diagram.png"
style="width:110.0%" />
</div>
<figcaption>COINES usage with APP3.1</figcaption>
</figure>

<h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h1>
<p>COINES should be usable on any recent PC or laptop system which has at
least a performance as an "office PC". The hardware should provide a USB
interface.</p>
<p>COINES runs on recent versions of Windows, Linux and Mac Operating
systems.</p>
<h2 id="installation-windows">Installation (Windows)<a class="headerlink" href="#installation-windows" title="Permanent link">&para;</a></h2>
<h3 id="system-requirements">System requirements<a class="headerlink" href="#system-requirements" title="Permanent link">&para;</a></h3>
<p>The supported OS versions are Windows 10 and 11.</p>
<h3 id="installation-of-coines">Installation of COINES<a class="headerlink" href="#installation-of-coines" title="Permanent link">&para;</a></h3>
<p>The steps below need to be followed in order to install COINES SDK:</p>
<ol>
<li>
<p>Download the latest version of COINES from <a href="https://www.bosch-sensortec.com/software-tools/tools/coines/">Bosch Sensortec
    website</a></p>
</li>
<li>
<p>Run the Installer</p>
</li>
<li>
<p>Accept the End User License Agreement and click Next</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Windows_installation_user_agreement.png"
style="width:70.0%" />
</div>
<figcaption>Windows installer end user agreement dialog</figcaption>
</figure></p>
</li>
<li>
<p>Click Install to start Installation</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Windows_install_dialog.png"
style="width:70.0%" />
</div>
<figcaption>Windows install dialog</figcaption>
</figure></p>
</li>
</ol>
<h3 id="installation-of-compiler-environment">Installation of compiler environment<a class="headerlink" href="#installation-of-compiler-environment" title="Permanent link">&para;</a></h3>
<p>COINES examples can be built using GNU C compiler (GCC). There are
various distributions of GCC. TDM-GCC is easy to install and hence
preferred for COINES. TDM GCC is based on MinGW GCC.</p>
<p>If you have already installed GCC (MinGW/Cygwin/MSYS2 GCC) and added to
'PATH' environmental variable, you can skip compiler installation.</p>
<p>The steps to install compiler environment are as follows:</p>
<ol>
<li>
<p>Download the TDM32/TDM64 bundle
    (<a href="http://tdm-gcc.tdragon.net/">link</a>). <strong>Use TDM32 bundle if your
    Windows OS is 32-bit and TDM64 bundle if 64-bit.</strong></p>
</li>
<li>
<p>Start the Installer. Ensure that the option Check for updated files
    on the TDM GCC server is unchecked. Click Create and proceed with
    the installation</p>
</li>
<li>
<p>If you intend to do run the COINES example on Application Board's
    microcontroller, install the latest version of <a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">GNU Embedded
    Toolchain for
    ARM</a>
    for Windows. Make sure you have checked 'Add to PATH'.</p>
</li>
</ol>
<figure>
<div class="center">
<img src="coinesAPI_images/COINES_tdm-gcc-InstallationDialog.png"
style="width:70.0%" />
</div>
</figure>

<figure>
<div class="center">
<img src="coinesAPI_images/COINES_tdm-gcc-InstallationDialog_1.png"
style="width:70.0%" />
</div>
<figcaption>TDM-GCC installation dialog</figcaption>
</figure>

<figure>
<div class="center">
<img src="coinesAPI_images/gnu_arm_toolchain_installation.png"
style="width:70.0%" />
</div>
<figcaption>GNU ARM Toolchain installation</figcaption>
</figure>

<h2 id="installation-linuxmacos">Installation (Linux/MacOS)<a class="headerlink" href="#installation-linuxmacos" title="Permanent link">&para;</a></h2>
<h3 id="system-requirements_1">System requirements<a class="headerlink" href="#system-requirements_1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>The supported Linux OS versions are Debian based - Ubuntu 18.04 and
    22.04.</p>
</li>
<li>
<p>The supported macOS versions are MacOS Ventura 13.4.1 and 13.5.2.</p>
</li>
</ul>
<h3 id="installation-of-coines_1">Installation of COINES<a class="headerlink" href="#installation-of-coines_1" title="Permanent link">&para;</a></h3>
<p>The steps below need to be followed in order to install COINES SDK:</p>
<ol>
<li>
<p>Download the installer.</p>
</li>
<li>
<p>Use the command <code>cd</code> to go to the directory where the installer is
    located and make the installer executable:</p>
<ul>
<li><code>chmod +x coines_vX.Y.sh</code></li>
</ul>
</li>
<li>
<p>Ensure that you are connected to the Internet before running the
    installer, which is executed like this:</p>
<ul>
<li><code>./coines_vX.Y.sh</code></li>
</ul>
</li>
<li>
<p>Accept the End User License agreement</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Linux_installation_user_agreement.png"
style="width:70.0%" />
</div>
</figure></p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Linux_installation_user_agreement_1.png"
style="width:70.0%" />
</div>
<figcaption>Linux installer end user agreement</figcaption>
</figure></p>
</li>
<li>
<p>The installer will prompt you if the required dependencies/packages
    are not installed. (This step requires root privileges.)</p>
</li>
</ol>
<h3 id="installation-of-compiler-environment_1">Installation of compiler environment<a class="headerlink" href="#installation-of-compiler-environment_1" title="Permanent link">&para;</a></h3>
<p>On a Debian or Redhat based Linux distro, the installer prompts for
installation of missing dependencies, <code>gcc</code>, <code>make</code> and <code>libusb-dev</code>
packages.If due to some reason installation fails, the user can manually
install the dependencies.</p>
<ul>
<li>
<p>Debian based distros - <code>gcc</code>, <code>make</code>, <code>libusb-1.0-0-dev</code>, <code>dfu-util</code>
    , <code>libdbus-1-dev</code></p>
</li>
<li>
<p>Redhat based distros - <code>gcc</code>, <code>make</code>, <code>libusbx-devel</code>, <code>dfu-util</code>,
    <code>dbus-devel</code></p>
</li>
<li>
<p>MacOS - <code>libusb</code>, <code>dfu-util</code></p>
</li>
</ul>
<p>If you intend to run the COINES example on Application Board's
microcontroller, download the latest version of <a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">GNU Embedded Toolchain
for
ARM</a>
for Linux and extract the package. Add the compiler to PATH variable by
editing <code>$HOME/.bashrc</code> or similar file like
<code>/etc/profile or /etc/environment</code>.</p>
<h1 id="coines">Using COINES to access the sensor on Engineering Board<a class="headerlink" href="#coines" title="Permanent link">&para;</a></h1>
<h2 id="ExampleOnMCU">Running examples on the MCU of the Application board<a class="headerlink" href="#ExampleOnMCU" title="Permanent link">&para;</a></h2>
<h3 id="working-principle">Working principle<a class="headerlink" href="#working-principle" title="Permanent link">&para;</a></h3>
<p>The COINES SDK can be cross-compiled on PC side and downloaded into the
memory of the Application board and executed there. The user can choose
to download the created binary into the flash memory or into the RAM (if
the binary is within the RAM memory capacity e.g., APP3.x's RAM is 256
KB).</p>
<p>Downloading COINES SDK example to APP3.x Flash memory will overwrite
default firmware. To update the firmware again, refer to section
<a href="#firmwareUpdate" reference="firmwareUpdate" reference-type="ref">13</a>.</p>
<p>In this configuration, the COINES layer provides a simple abstraction on
top of the MCU BSP (i.e. board level support layer of the
microcontroller). Any <code>printf</code> command will now not output to the
console, but rather to the USB connection, which appears as virtual COM
port on PC side.</p>
<p>This mode facilitates the execution of many time-critical operations on
the sensor, such as fast reading of FIFO content at high data rates.</p>
<figure>
<div class="center">
<img src="coinesAPI_images/COINES_workingPrinciple_runOnMCU.png"
style="width:90.0%" />
</div>
<figcaption>Working principle: Running example on the MCU of the
Application board</figcaption>
</figure>

<h3 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>To get started with example execution, follow these steps:</p>
<ol>
<li>
<p>Make sure that <a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">GNU Embedded Toolchain for
    ARM</a>
    is installed on your PC and added to environmental variable <code>PATH</code>.</p>
</li>
<li>
<p>Connect the Application board via USB, with the sensor shuttle board
    mounted.</p>
</li>
<li>
<p>Open the command prompt or the terminal.</p>
</li>
<li>
<p>Use the command <code>cd</code> to go to the directory where the example that
    is to be built is located.</p>
</li>
</ol>
<h3 id="interfacing-via-ble">Interfacing via BLE<a class="headerlink" href="#interfacing-via-ble" title="Permanent link">&para;</a></h3>
<p>The procedure to interface via BLE involves these steps:</p>
<ol>
<li>
<p>Open the script to be executed (in case of SensorAPI - common.c file
    in the selected example folder) in your IDE</p>
</li>
<li>
<p>Change COINES_COMM_INTF_USB to COINES_COMM_INTF_BLE</p>
</li>
<li>
<p>Change all print statments</p>
<div class="language-text highlight"><pre><span></span><code>    printf(...) to fprintf(bt_w,...)
</code></pre></div>
</li>
<li>
<p>Now follow the steps from 1 - 4 in the above section</p>
</li>
</ol>
<h3 id="cross-compiling">Cross compiling<a class="headerlink" href="#cross-compiling" title="Permanent link">&para;</a></h3>
<p>To compile and download an example to Engineering Board's
microcontroller, type any of the build commands below based on available
Engineering board type and target memory location. Use '<code>mingw32-make</code>'
(TDM-GCC/MinGW) or '<code>make</code>' (Linux/Cygwin/MSYS2/MacOS) for compilation.</p>
<p>Note: Nicla board programs can only be executed as PC target at this
moment.</p>
<h3 id="viewing-the-results">Viewing the results<a class="headerlink" href="#viewing-the-results" title="Permanent link">&para;</a></h3>
<p>The ways to view the execution results are outlined as follows:</p>
<ol>
<li>
<p>Use a Serial Terminal application to view output.</p>
<ul>
<li>
<p>Windows - PuTTY, HTerm,etc.,</p>
</li>
<li>
<p>Linux - <code>cat</code> command. Eg: <code>cat /dev/ttyACM0</code></p>
</li>
<li>
<p>macOS - <code>screen</code> command. Eg: <code>screen /dev/tty.usbmodem9F31</code></p>
</li>
</ul>
<p>Note: The binary on the MCU will be executed once the serial port is
opened. The port must be opened including DTR signal set, otherwise
the binary will not be executed. Some terminal programs such as
HTerm allow explicit setting of the DTR signal.</p>
</li>
<li>
<p>For bluetooth communication, connect the Application board to
    another power source and keep it within the BLE range. And use any
    of the below tools to view the output.</p>
<ul>
<li>
<p>Android app - <a href="https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal">Serial Bluetooth
    terminal</a></p>
</li>
<li>
<p>Website - <a href="https://wiki.makerdiary.com/web-device-cli/">Web Device
    CLI</a></p>
</li>
<li>
<p>Python script -</p>
</li>
</ul>
</li>
</ol>
<h3 id="data-logging">Data logging<a class="headerlink" href="#data-logging" title="Permanent link">&para;</a></h3>
<p>The user can use any serial terminal program to access and store the
data provided via virtual COM port e.g HTerm has \"Save output\" option
to store log.</p>
<h2 id="running-examples-on-pc-side">Running examples on PC side<a class="headerlink" href="#running-examples-on-pc-side" title="Permanent link">&para;</a></h2>
<h3 id="working-principle_1">Working principle<a class="headerlink" href="#working-principle_1" title="Permanent link">&para;</a></h3>
<p>When compiling the COINES SDK for PC side, the COINES layer provides an
abstraction of the embedded environment on the host side. COINES library
provides read and write functions for I<sup>2</sup>C and SPI on PC side. These
functions receive the arguments of the user input (i.e. what register
address to read from) and tunnel them through the USB connection to the
Application Board, where they are fed into the embedded I<sup>2</sup>C and SPI
functions and are executed to access the sensor. Any result or response
from those functions is tunneled back to the PC side and provided to the
example application.</p>
<p>This approach allows easy and flexible programming and offers the
possibility to integrate the example code into other applications or add
advanced logging options. The drawback is that in this mode the code is
not executed in real time, as it runs on a multi-tasking operating
system. To overcome this drawback, the examples can also be run on the
MCU side (see section <a href="#ExampleOnMCU">5.1</a>{reference-type="ref"
reference="ExampleOnMCU"}).</p>
<figure>
<div class="center">
<img src="coinesAPI_images/COINES_workingPrinciple_runOnPC.png"
style="width:90.0%" />
</div>
<figcaption>Working principle: Running example on PC side</figcaption>
</figure>

<h3 id="pc-side-implementation">PC side implementation<a class="headerlink" href="#pc-side-implementation" title="Permanent link">&para;</a></h3>
<p>This setup has the challenge of lacking the real-time capabilities known
from a pure microcontroller environment. To overcome this, the coinesAPI
offers streaming functions, which allow the user to schedule data
readout directly on the microcontroller, either based on a data
interrupt coming from the sensors or based on the timer of the
microcontroller. The scheduler waits for the configured interrupt
(sensor interrupt or timer interrupt) and reads out areas of the
register map, which can be configured by the user.</p>
<p>As an example, the user could choose to read out the 6 bytes from the
register map of a certain inertial sensor, containing the sensor data of
three axis (2 bytes per axis). If the user would configure e.g a readout
once per milliseconds, the result would be a data stream of three-axis
sensor data at a rate of 1 kHz.</p>
<h3 id="getting-started_1">Getting started<a class="headerlink" href="#getting-started_1" title="Permanent link">&para;</a></h3>
<p>To get started with example execution, follow these steps:</p>
<ol>
<li>
<p>Connect the Application board via USB, with the sensor shuttle board
    mounted.</p>
</li>
<li>
<p>Refer to section <a href="#firmwareUpdate">13</a>{reference-type="ref"
    reference="firmwareUpdate"} and update the Coines Bridge firmware to
    the board.</p>
</li>
<li>
<p>Open the command prompt or the terminal.</p>
</li>
<li>
<p>Use the command <code>cd</code> to go to the directory where the example that
    is to be built is located.</p>
</li>
</ol>
<p>Note: Some examples may not compile for both PC and MCU target. Please
refer to the example documentation or simply the example name (e.g.
examples that can only be compiled for the PC are named with a following
'_pc').</p>
<h3 id="interfacing-via-ble_1">Interfacing via BLE<a class="headerlink" href="#interfacing-via-ble_1" title="Permanent link">&para;</a></h3>
<p>The procedure to interface via BLE involves these steps:</p>
<ol>
<li>
<p>Open the script to be executed (in case of SensorAPI - common.c file
    in the selected example folder) in your IDE</p>
</li>
<li>
<p>Change COINES_COMM_INTF_USB to COINES_COMM_INTF_BLE</p>
</li>
<li>
<p>Now follow the steps from 1 - 4 in the above section</p>
</li>
</ol>
<h3 id="compiling">Compiling<a class="headerlink" href="#compiling" title="Permanent link">&para;</a></h3>
<p>To run an example in PC side, execute below command \"mingw32-make
TARGET=PC\". Use '<code>mingw32-make</code>' (TDM-GCC/MinGW) or '<code>make</code>'
(Linux/Cygwin/MSYS2/MacOS) for compilation.</p>
<h3 id="viewing-the-results_1">Viewing the results<a class="headerlink" href="#viewing-the-results_1" title="Permanent link">&para;</a></h3>
<p>Running the output executable in the command prompt of the PC will
display the results. To view ouput via BLE, connect the Application
board to another power source and keep it within the BLE range and run
the executable in the PC.</p>
<h3 id="data-logging_1">Data logging<a class="headerlink" href="#data-logging_1" title="Permanent link">&para;</a></h3>
<p>The user can utilize the terminal's output redirection command to store
the result of a command/executable in a file, as demonstrated below.</p>
<figure>
<div class="center">
<img src="coinesAPI_images/PC_data_logging.png" style="width:90.0%" />
</div>
</figure>

<h2 id="project-cleanup">Project Cleanup<a class="headerlink" href="#project-cleanup" title="Permanent link">&para;</a></h2>
<p>The commands to clean build files are listed below:</p>
<ul>
<li>
<p><code>mingw32-make clean</code> - Use this command to remove the object files
    and other intermediate files created during the compilation process.</p>
</li>
<li>
<p><code>mingw32-make clean-all</code> - Use this command to remove all build
    artifacts, including the final executable or library, and start the
    build process from scratch</p>
</li>
</ul>
<h1 id="using-coinespy-to-access-the-sensor-on-engineering-board">Using COINESPY to access the sensor on Engineering Board<a class="headerlink" href="#using-coinespy-to-access-the-sensor-on-engineering-board" title="Permanent link">&para;</a></h1>
<h2 id="introduction-to-coinespy-library">Introduction to <code>COINESPY</code> library<a class="headerlink" href="#introduction-to-coinespy-library" title="Permanent link">&para;</a></h2>
<p>The <code>COINESPY</code> library provides a Python interface for interacting with
the Bosch Sensortec's Engineering Boards. The library offers the
following range of functionalities:</p>
<ul>
<li>
<p>Control VDD and VDDIO of sensor</p>
</li>
<li>
<p>Configure SPI and I<sup>2</sup>C bus parameters</p>
</li>
<li>
<p>Read and write into registers of sensors from Bosch Sensortec via
    SPI and I<sup>2</sup>C</p>
</li>
<li>
<p>Read and write digital pins of the Application Board</p>
</li>
</ul>
<h2 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">&para;</a></h2>
<p>The <code>COINESPY</code> module can be installed using pip:</p>
<div class="language-text highlight"><pre><span></span><code>pip install coinespy
</code></pre></div>
<p>The module can be found on <a href="https://pypi.org/project/coinespy/">https://pypi.org/project/coinespy/</a>. It is
highly recommended to test the following script
<code>examples\python\coinespy_test.py</code> in the COINES installation or Refer
to <a href="#GettingBoardInfo">8.2.1</a>{reference-type="ref"
reference="GettingBoardInfo"} to check if the installation was
successful.</p>
<h1 id="using-sensor-api-with-coines">Using Sensor API with COINES<a class="headerlink" href="#using-sensor-api-with-coines" title="Permanent link">&para;</a></h1>
<h2 id="sensorapi">SensorAPI<a class="headerlink" href="#sensorapi" title="Permanent link">&para;</a></h2>
<p>Bosch Sensortec recommends using the SensorAPI in order to communicate
with the sensors. The SensorAPI, an abstraction layer written in C makes
it much more convenient for the user to access the register map of the
sensor, in order to configure certain functionality and obtain certain
information from it.</p>
<p>For making use of the SensorAPI, some function pointers must be set to
the appropriate read/write functions of the selected bus on the system
(either I<sup>2</sup>C or SPI), as well as one function pointer to a system's
function causing delays in milliseconds.</p>
<p>In order to execute C code using SensorAPI, the COINES API provides the
mentioned read, write, delay functions. These functions are wrapper
functions, embedding the actual SensorAPI payloads into a transport
package, sending this via USB or BLE to the Engineering board, where the
payload is translated into corresponding SPI or I<sup>2</sup>C messages and sent
to the sensor on the shuttle board.The mapping would look similar to the
one below.</p>
<div class="language-text highlight"><pre><span></span><code>#include &quot;coines.h&quot;
#include &quot;bst_sensor.h&quot;

struct bst_sensor_dev sensordev;
....
....
sensordev.intf = BST_SENSOR_I2C_INTF;  // SPI - BST_SENSOR_SPI_INTF
sensordev.read = coines_read_i2c;   // coines_read_spi
sensordev.write = coines_write_i2c; // coines_write_spi
sensordev.delay_ms = coines_delay_usec;
</code></pre></div>
<p>For the description of COINES functions used, refer to
<a href="#CoinesCFunctions">15.2</a>{reference-type="ref"
reference="CoinesCFunctions"}.</p>
<h2 id="downloading-sensor-api">Downloading Sensor API<a class="headerlink" href="#downloading-sensor-api" title="Permanent link">&para;</a></h2>
<p>In order to download SensorAPI, the steps below need to be followed:</p>
<ul>
<li>
<p>Download SensorAPI repo using Download zip option for selected
    sensors from boschsensortec github
    <a href="https://github.com/BoschSensortec">https://github.com/BoschSensortec</a>.</p>
</li>
<li>
<p>Unzip the downloaded SensorAPI repo to .</p>
</li>
<li>
<p>Rename the unzipped folder to sensor name e.g and change directory
    to an example folder to execute it.</p>
</li>
</ul>
<h2 id="running-example-on-mcu-side">Running example on MCU side<a class="headerlink" href="#running-example-on-mcu-side" title="Permanent link">&para;</a></h2>
<p>Here are the step-by-step instructions to run examples on MCU side:</p>
<ul>
<li>
<p>Selected Platform: Windows</p>
</li>
<li>
<p>Board: APP3.1</p>
</li>
<li>
<p>Sensor shuttle: BMI270</p>
</li>
<li>
<p>Example:</p>
</li>
<li>
<p>Connect the Application Board board via USB, with the sensor shuttle
    board mounted.</p>
</li>
<li>
<p>Open the command prompt or the terminal.</p>
</li>
<li>
<p>Use the command <code>cd</code> to go to the directory where the example that
    is to be built is located.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_cd.png" style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>Execute command \"mingw32-make TARGET=MCU_APP31 download\"</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_compile.png"
style="width:90.0%" />
</div>
</figure></p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_download.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>View the output in a serial terminal application like HTerm</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_output.png"
style="width:90.0%" />
</div>
</figure></p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_log.png" style="width:90.0%" />
</div>
</figure></p>
</li>
</ul>
<h2 id="running-example-on-mcu-side-via-ble">Running example on MCU side via BLE<a class="headerlink" href="#running-example-on-mcu-side-via-ble" title="Permanent link">&para;</a></h2>
<p>The sequence of actions required for interfacing via BLE includes the
steps below:</p>
<ol>
<li>
<p>Go to the folder in file explorer</p>
</li>
<li>
<p>Open the common.c file in the selected example folder in your IDE</p>
</li>
<li>
<p>Change COINES_COMM_INTF_USB to COINES_COMM_INTF_BLE</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_ble_intf.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>Open example script and change the</p>
<div class="language-text highlight"><pre><span></span><code>    printf(...) to fprintf(bt_w,...)
</code></pre></div>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_ble_print.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>Now follow the same steps from 1 - 4 in the above section.</p>
</li>
<li>
<p>Connect the Application board to another power source and keep it
    within the BLE range.</p>
</li>
<li>
<p>View the output in the <a href="https://wiki.makerdiary.com/web-device-cli/">Web Device
    CLI</a> site in your
    browser by connecting to board via BLE.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_ble_pair.png"
style="width:70.0%" />
</div>
</figure></p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mcu_example_ble_output.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
</ol>
<h2 id="running-example-on-pc-side">Running example on PC side<a class="headerlink" href="#running-example-on-pc-side" title="Permanent link">&para;</a></h2>
<p>Here are the step-by-step instructions to run examples on PC side:</p>
<ul>
<li>
<p>Selected Platform: Windows</p>
</li>
<li>
<p>Board: APP3.1</p>
</li>
<li>
<p>Sensor shuttle: BMI270</p>
</li>
<li>
<p>Example:</p>
</li>
<li>
<p>Connect the Application Board board via USB, with the sensor shuttle
    board mounted.</p>
</li>
<li>
<p>Refer to section <a href="#firmwareUpdate">13</a>{reference-type="ref"
    reference="firmwareUpdate"} and update the Coines Bridge firmware to
    the board.</p>
</li>
<li>
<p>Open the command prompt or the terminal.</p>
</li>
<li>
<p>Use the command <code>cd</code> to go to the directory where the example that
    is to be built is located.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Pc_example_cd.png" style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>Execute command \"mingw32-make TARGET=PC
    COINES_BACKEND=COINES_BRIDGE\"</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Pc_example_compile.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
<li>
<p>View the output in the command prompt by running the example
    executable.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Pc_example_output.png" style="width:90.0%" />
</div>
</figure></p>
</li>
</ul>
<h2 id="running-example-on-pc-side-via-ble">Running example on PC side via BLE<a class="headerlink" href="#running-example-on-pc-side-via-ble" title="Permanent link">&para;</a></h2>
<p>The sequence of actions required for interfacing via BLE includes the
steps below:</p>
<ol>
<li>
<p>Go to the examples folder in file explorer.</p>
</li>
<li>
<p>Open the common.c file in the selected example folder in your IDE.</p>
</li>
<li>
<p>Change COINES_COMM_INTF_USB to COINES_COMM_INTF_BLE.</p>
</li>
<li>
<p>Connect the Application board to another power source and keep it
    within the BLE range.</p>
</li>
<li>
<p>Now follow the same steps from 3 - 6 in the above section.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Pc_example_ble_output.png"
style="width:90.0%" />
</div>
</figure></p>
</li>
</ol>
<h1 id="examples-on-how-to-use-coines">Examples on how to use COINES<a class="headerlink" href="#examples-on-how-to-use-coines" title="Permanent link">&para;</a></h1>
<h2 id="coines-c-examples">COINES C examples<a class="headerlink" href="#coines-c-examples" title="Permanent link">&para;</a></h2>
<h3 id="establishing-communication">Establishing communication<a class="headerlink" href="#establishing-communication" title="Permanent link">&para;</a></h3>
<p>The following code snippet shows how to set up a connection with the
board.</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>The APIs below can be used for board interface.</p>
<ul>
<li>
<p><code>coines_open_comm_intf</code></p>
</li>
<li>
<p><code>coines_close_comm_intf</code></p>
</li>
</ul>
<h3 id="getting-board-info">Getting board info<a class="headerlink" href="#getting-board-info" title="Permanent link">&para;</a></h3>
<p>The following code snippet shows how to get board information.</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">coines_board_info</span><span class="w"> </span><span class="n">board_info</span><span class="p">;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_get_board_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">board_info</span><span class="p">);</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Board Info:&quot;</span><span class="p">);</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">board_info.board:0x%02X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">board_info</span><span class="p">.</span><span class="n">board</span><span class="p">);</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">board_info.hardware_id:0x%02X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">board_info</span><span class="p">.</span><span class="n">hardware_id</span><span class="p">);</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">board_info.shuttle_id:0x%02X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">board_info</span><span class="p">.</span><span class="n">shuttle_id</span><span class="p">);</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">board_info.software_id:0x%02X&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">board_info</span><span class="p">.</span><span class="n">software_id</span><span class="p">);</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h3 id="i2c-config-and-read">I2C config and read<a class="headerlink" href="#i2c-config-and-read" title="Permanent link">&para;</a></h3>
<p>This basic program shows how to configure and perform I2C read. Sensor:
BMI270</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="cp">#define BMI2_I2C_PRIM_ADDR  0x68</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">chip_id</span><span class="p">;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">reg_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">        </span><span class="cm">/* Power up the board */</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">3300</span><span class="p">,</span><span class="w"> </span><span class="mi">3300</span><span class="p">);</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">        </span><span class="n">coines_delay_usec</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">        </span><span class="cm">/* SDO to Ground */</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">        </span><span class="n">coines_set_pin_config</span><span class="p">(</span><span class="n">COINES_SHUTTLE_PIN_22</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_DIRECTION_OUT</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_VALUE_LOW</span><span class="p">);</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">        </span><span class="cm">/* Make CSB pin HIGH */</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">        </span><span class="n">coines_set_pin_config</span><span class="p">(</span><span class="n">COINES_SHUTTLE_PIN_21</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_DIRECTION_OUT</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_VALUE_HIGH</span><span class="p">);</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="w">        </span><span class="cm">/* SDO pin is made low */</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">        </span><span class="n">coines_set_pin_config</span><span class="p">(</span><span class="n">COINES_SHUTTLE_PIN_SDO</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_DIRECTION_OUT</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_VALUE_LOW</span><span class="p">);</span>
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="w">        </span><span class="cm">/* I2C config */</span>
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a><span class="w">        </span><span class="n">coines_config_i2c_bus</span><span class="p">(</span><span class="n">COINES_I2C_BUS_0</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_I2C_STANDARD_MODE</span><span class="p">);</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a><span class="w">        </span><span class="cm">/* I2C read */</span>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_read_i2c</span><span class="p">(</span><span class="n">COINES_I2C_BUS_0</span><span class="p">,</span><span class="w"> </span><span class="n">BMI2_I2C_PRIM_ADDR</span><span class="p">,</span><span class="w"> </span><span class="n">reg_addr</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">chip_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;I2C read: Sensor chip ID - 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">chip_id</span><span class="p">);</span>
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a>
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a><span class="w">        </span><span class="cm">/* Coines interface reset */</span>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="w">        </span><span class="n">coines_soft_reset</span><span class="p">();</span>
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a>
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a>
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>The user shall pass GPIO pin numbers, read register address and I2C
device address for sensors based on the selected sensor shuttle board.
I2C communication require the proper setting of VDD and VDDIO using
<code>coines_set_shuttleboard_vdd_vddio_config</code>. The APIs below can be used
for I2C configure/read/write.</p>
<ul>
<li>
<p><code>coines_config_i2c_bus</code></p>
</li>
<li>
<p><code>coines_read_i2c</code></p>
</li>
<li>
<p><code>coines_write_i2c</code></p>
</li>
</ul>
<h3 id="spi-config-and-read">SPI config and read<a class="headerlink" href="#spi-config-and-read" title="Permanent link">&para;</a></h3>
<p>This basic program shows how to configure and perform SPI read. Sensor:
BMI270</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="cp">#define BMI2_SPI_RD_MASK  0x80</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">chip_id</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">dummy_byte</span><span class="p">;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="cm">/* An extra dummy byte is read during SPI read */</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">dummy_byte_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">reg_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">        </span><span class="cm">/* Power up the board */</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">        </span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">3300</span><span class="p">,</span><span class="w"> </span><span class="mi">3300</span><span class="p">);</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">        </span><span class="cm">/* SPI config */</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_config_spi_bus</span><span class="p">(</span><span class="n">COINES_SPI_BUS_0</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_SPI_SPEED_5_MHZ</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_SPI_MODE3</span><span class="p">);</span>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">        </span><span class="cm">/* Pin config */</span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">        </span><span class="n">coines_set_pin_config</span><span class="p">(</span><span class="n">COINES_SHUTTLE_PIN_21</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_DIRECTION_OUT</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_VALUE_HIGH</span><span class="p">);</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="w">        </span><span class="cm">/* Mask read register address for SPI */</span>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">        </span><span class="n">reg_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">reg_addr</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">BMI2_SPI_RD_MASK</span><span class="p">);</span>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">        </span><span class="cm">/* Dummy read for SPI init*/</span>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_read_spi</span><span class="p">(</span><span class="n">COINES_SPI_BUS_0</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_MINI_SHUTTLE_PIN_2_1</span><span class="p">,</span><span class="w"> </span><span class="n">reg_addr</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dummy_byte</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">        </span><span class="n">coines_delay_usec</span><span class="p">(</span><span class="mi">450</span><span class="p">);</span>
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="w">        </span><span class="cm">/* SPI read */</span>
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_read_spi</span><span class="p">(</span><span class="n">COINES_SPI_BUS_0</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_MINI_SHUTTLE_PIN_2_1</span><span class="p">,</span><span class="w"> </span><span class="n">reg_addr</span><span class="p">,</span><span class="w"> </span><span class="n">chip_id</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dummy_byte_len</span><span class="p">);</span>
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="w">        </span><span class="n">coines_delay_usec</span><span class="p">(</span><span class="mi">450</span><span class="p">);</span>
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SPI read: Sensor chip ID - 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">chip_id</span><span class="p">[</span><span class="n">dummy_byte_len</span><span class="p">]);</span>
</span><span id="__span-3-51"><a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>
</span><span id="__span-3-52"><a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-3-53"><a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-3-54"><a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>
</span><span id="__span-3-55"><a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a><span class="w">        </span><span class="cm">/* Coines interface reset */</span>
</span><span id="__span-3-56"><a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a><span class="w">        </span><span class="n">coines_soft_reset</span><span class="p">();</span>
</span><span id="__span-3-57"><a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-3-58"><a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>
</span><span id="__span-3-59"><a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-3-60"><a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a>
</span><span id="__span-3-61"><a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-3-62"><a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>The user shall pass GPIO pin numbers, read register address and SPI CS
pins for sensors based on the selected sensor shuttle board. SPI
communication require the proper setting of VDD and VDDIO using
<code>coines_set_shuttleboard_vdd_vddio_config</code>. The APIs below can be used
for SPI configure/read/write.</p>
<ul>
<li>
<p><code>coines_config_spi_bus</code></p>
</li>
<li>
<p><code>coines_read_spi</code></p>
</li>
<li>
<p><code>coines_write_spi</code></p>
</li>
</ul>
<h3 id="led-and-button-control">Led and button control<a class="headerlink" href="#led-and-button-control" title="Permanent link">&para;</a></h3>
<p>The example program below is to control LEDs and buttons on the board.
Target: MCU</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="cm">/* Callback for button 1 interrupt */</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">button1CB</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param1</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param2</span><span class="p">);</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="cm">/*Callback for button 1 event */</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">button1CB</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param1</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param2</span><span class="p">)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">param1</span><span class="p">;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">param2</span><span class="p">;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="n">coines_set_led</span><span class="p">(</span><span class="n">COINES_LED_RED</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_LED_STATE_ON</span><span class="p">);</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">        </span><span class="n">coines_set_led</span><span class="p">(</span><span class="n">COINES_LED_GREEN</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_LED_STATE_OFF</span><span class="p">);</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">        </span><span class="n">coines_set_led</span><span class="p">(</span><span class="n">COINES_LED_BLUE</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_LED_STATE_ON</span><span class="p">);</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">        </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span><span class="n">coines_set_pin_config</span><span class="p">(</span><span class="n">COINES_APP30_BUTTON_1</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_DIRECTION_IN</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_VALUE_HIGH</span><span class="p">);</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">        </span><span class="n">coines_attach_interrupt</span><span class="p">(</span><span class="n">COINES_APP30_BUTTON_1</span><span class="p">,</span><span class="w"> </span><span class="n">button1CB</span><span class="p">,</span><span class="w"> </span><span class="n">COINES_PIN_INTERRUPT_FALLING_EDGE</span><span class="p">);</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h3 id="file-listing-in-external-memory">File listing in External memory<a class="headerlink" href="#file-listing-in-external-memory" title="Permanent link">&para;</a></h3>
<p>To list the files in the external memory, below snippet can be used.
Target: MCU</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">        </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">        </span><span class="kt">DIR</span><span class="w"> </span><span class="o">*</span><span class="n">directory</span><span class="p">;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">dirent</span><span class="w"> </span><span class="o">*</span><span class="n">dir</span><span class="p">;</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="n">directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opendir</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">);</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readdir</span><span class="p">(</span><span class="n">directory</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">            </span><span class="n">closedir</span><span class="p">(</span><span class="n">directory</span><span class="p">);</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h3 id="temperature-measurement">Temperature measurement<a class="headerlink" href="#temperature-measurement" title="Permanent link">&para;</a></h3>
<p>This simple program demonstrates how to measure temperature of the
board. Target: MCU</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">temp_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">        </span><span class="cm">/* Power up the board */</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">        </span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">1800</span><span class="p">,</span><span class="w"> </span><span class="mi">1800</span><span class="p">);</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">        </span><span class="cm">/* Read temperature data */</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">        </span><span class="n">coines_read_temp_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">temp_data</span><span class="p">);</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Temperature data = %f in degC&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">temp_data</span><span class="p">);</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">        </span><span class="n">coines_set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h3 id="battery-level-measurement">Battery level measurement<a class="headerlink" href="#battery-level-measurement" title="Permanent link">&para;</a></h3>
<p>This simple program demonstrates how to measure battery level when a
battery is connected to the board. Target: MCU</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">batt_status_percentage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">batt_status_in_milli_volts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_BLE</span><span class="p">;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">        </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">        </span><span class="cm">/* Read battery level */</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">        </span><span class="n">coines_read_bat_status</span><span class="p">(</span><span class="o">&amp;</span><span class="n">batt_status_in_milli_volts</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">batt_status_percentage</span><span class="p">);</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">bt_w</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Battery level in percentage = %d %% </span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">batt_status_percentage</span><span class="p">);</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">bt_w</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Battery level in millivolts = %d mV </span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">batt_status_in_milli_volts</span><span class="p">);</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h3 id="bleComConfig">Configure BLE communication<a class="headerlink" href="#bleComConfig" title="Permanent link">&para;</a></h3>
<p>This example shows how to configure BLE connection. Target: PC</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="cm">/*! Macros to hold the BLE peripheral name and address to be connected */</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="cm">/*! Please change the name and address with BLE name of the Application board under test */</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="cp">#define BLE_NAME  &quot;APP Board 3.0(B6-E5)&quot;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="cp">#define BLE_ADDR  &quot;dd:fc:ab:af:b6:e5&quot;</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="cm">/*! Variable to hold the communication interface type */</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_BLE</span><span class="p">;</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">ble_peripheral_info</span><span class="w"> </span><span class="n">ble_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">BLE_ADDR</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">ble_peripheral_info</span><span class="w"> </span><span class="n">ble_info</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">peripheral_count</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">        </span><span class="cm">/* Get the BLE peripheral list */</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_scan_ble_devices</span><span class="p">(</span><span class="n">ble_info</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">peripheral_count</span><span class="p">,</span><span class="w"> </span><span class="mi">7000</span><span class="p">);</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">err_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_coines_error_str</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">err_str</span><span class="p">);</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">        </span><span class="cm">/* Print the BLE peripheral list */</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">BLE devices found:&quot;</span><span class="p">);</span>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">peripheral_count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">[%d] %s [%s]&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">ble_info</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ble_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">ble_info</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ble_address</span><span class="p">);</span>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">        </span><span class="cm">/* Open BLE connection */</span>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ble_config</span><span class="p">);</span>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="w">        </span><span class="cm">/* Close BLE connection */</span>
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="w">        </span><span class="n">coines_soft_reset</span><span class="p">();</span>
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-8-57"><a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="w">    </span><span class="p">}</span><span class="w">   </span>
</span></code></pre></div>
<p>The user shall modify BLE settings like address and name before
executing this example.</p>
<h3 id="serialComConfig">Configure Serial communication<a class="headerlink" href="#serialComConfig" title="Permanent link">&para;</a></h3>
<p>This example shows how to configure Serial COM connection. Target: PC</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="cp">#define ROBERT_BOSCH_USB_VID   (0x108C)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="cp">#define ARDUINO_USB_VID        (0x2341)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="cp">#define BST_APP30_CDC_USB_PID  (0xAB3C)</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="cp">#define BST_APP20_CDC_USB_PID  (0xAB2C)</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="cp">#define ARDUINO_NICLA_USB_PID  (0x0060)</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="cm">/*! Variable to hold the communication interface type */</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">coines_comm_intf</span><span class="w"> </span><span class="n">comm_intf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COINES_COMM_INTF_USB</span><span class="p">;</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">        </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">coines_serial_com_config</span><span class="w"> </span><span class="n">scom_config</span><span class="p">;</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">        </span><span class="n">scom_config</span><span class="p">.</span><span class="n">baud_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">38400</span><span class="p">;</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">        </span><span class="n">scom_config</span><span class="p">.</span><span class="n">vendor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROBERT_BOSCH_USB_VID</span><span class="p">;</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">        </span><span class="n">scom_config</span><span class="p">.</span><span class="n">product_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BST_APP30_CDC_USB_PID</span><span class="p">;</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">        </span><span class="n">scom_config</span><span class="p">.</span><span class="n">com_port_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;COM4&quot;</span><span class="p">;</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">        </span><span class="n">scom_config</span><span class="p">.</span><span class="n">rx_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">        </span><span class="cm">/* Open serial connection */</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">scom_config</span><span class="p">);</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Successfully connected to board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-9-35"><a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Unable to connect with board!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-9-36"><a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a><span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-9-37"><a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-38"><a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>
</span><span id="__span-9-39"><a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a><span class="w">        </span><span class="cm">/* Close serial connection */</span>
</span><span id="__span-9-40"><a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="w">        </span><span class="n">coines_soft_reset</span><span class="p">();</span>
</span><span id="__span-9-41"><a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="w">        </span><span class="n">coines_delay_msec</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-9-42"><a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>
</span><span id="__span-9-43"><a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="w">        </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">comm_intf</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-9-44"><a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a>
</span><span id="__span-9-45"><a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-9-46"><a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>The user shall modify Serial COM settings like vendor ID, product ID and
COM port name before executing this example.</p>
<h2 id="coines-python-examples">COINES Python examples<a class="headerlink" href="#coines-python-examples" title="Permanent link">&para;</a></h2>
<h3 id="GettingBoardInfo">Getting board info<a class="headerlink" href="#GettingBoardInfo" title="Permanent link">&para;</a></h3>
<p>The following code snippet shows how to get board information.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">import</span> <span class="nn">coinespy</span> <span class="k">as</span> <span class="nn">cpy</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="kn">from</span> <span class="nn">coinespy</span> <span class="kn">import</span> <span class="n">ErrorCodes</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="n">COM_INTF</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CommInterface</span><span class="o">.</span><span class="n">USB</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="n">board</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CoinesBoard</span><span class="p">()</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;coinespy version - </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cpy</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>        <span class="n">board</span><span class="o">.</span><span class="n">open_comm_interface</span><span class="p">(</span><span class="n">COM_INTF</span><span class="p">)</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>        <span class="k">if</span> <span class="n">board</span><span class="o">.</span><span class="n">error_code</span> <span class="o">!=</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">COINES_SUCCESS</span><span class="p">:</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Could not connect to board: </span><span class="si">{</span><span class="n">board</span><span class="o">.</span><span class="n">error_code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>            <span class="n">b_info</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_info</span><span class="p">()</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;coines lib version: </span><span class="si">{</span><span class="n">board</span><span class="o">.</span><span class="n">lib_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>                <span class="sa">f</span><span class="s1">&#39;BoardInfo: HW/SW ID: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">b_info</span><span class="o">.</span><span class="n">HardwareId</span><span class="p">)</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">b_info</span><span class="o">.</span><span class="n">SoftwareId</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>            <span class="n">board</span><span class="o">.</span><span class="n">close_comm_interface</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="i2c-config-and-read_1">I2C config and read<a class="headerlink" href="#i2c-config-and-read_1" title="Permanent link">&para;</a></h3>
<p>This basic program shows how to configure and perform I2C read. Sensor:
BMI085</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="kn">import</span> <span class="nn">time</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="kn">import</span> <span class="nn">coinespy</span> <span class="k">as</span> <span class="nn">cpy</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="kn">from</span> <span class="nn">coinespy</span> <span class="kn">import</span> <span class="n">ErrorCodes</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="n">COM_INTF</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CommInterface</span><span class="o">.</span><span class="n">USB</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>        <span class="n">BOARD</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CoinesBoard</span><span class="p">()</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">open_comm_interface</span><span class="p">(</span><span class="n">COM_INTF</span><span class="p">)</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>        <span class="k">if</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">error_code</span> <span class="o">!=</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">COINES_SUCCESS</span><span class="p">:</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Open Communication interface: </span><span class="si">{</span><span class="n">BOARD</span><span class="o">.</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>        <span class="n">BMI085_I2C_ADDRESS_ACCEL</span> <span class="o">=</span> <span class="mh">0x18</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>        <span class="n">BMI085_I2C_ADDRESS_GYRO</span>  <span class="o">=</span> <span class="mh">0x68</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>        <span class="n">BMI08_REG_ACCEL_CHIP_ID</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>        <span class="c1">#  Config I2C pins</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_8</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_SDO</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>        <span class="c1"># Set PS pin of gyro to HIGH for proper protocol selection</span>
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_9</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>        <span class="c1"># I2C config</span>
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">config_i2c_bus</span><span class="p">(</span>
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">I2CBus</span><span class="o">.</span><span class="n">BUS_I2C_0</span><span class="p">,</span> <span class="n">BMI085_I2C_ADDRESS_ACCEL</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">I2CMode</span><span class="o">.</span><span class="n">STANDARD_MODE</span><span class="p">)</span>
</span><span id="__span-11-34"><a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>
</span><span id="__span-11-35"><a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mf">3.3</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
</span><span id="__span-11-36"><a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</span><span id="__span-11-37"><a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>
</span><span id="__span-11-38"><a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>        <span class="c1"># I2C read</span>
</span><span id="__span-11-39"><a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a>        <span class="n">accel_chip_id</span> <span class="o">=</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">read_i2c</span><span class="p">(</span>
</span><span id="__span-11-40"><a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">I2CBus</span><span class="o">.</span><span class="n">BUS_I2C_0</span><span class="p">,</span> <span class="n">BMI08_REG_ACCEL_CHIP_ID</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BMI085_I2C_ADDRESS_ACCEL</span><span class="p">)</span>
</span><span id="__span-11-41"><a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>        <span class="n">gyro_chip_id</span> <span class="o">=</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">read_i2c</span><span class="p">(</span>
</span><span id="__span-11-42"><a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">I2CBus</span><span class="o">.</span><span class="n">BUS_I2C_0</span><span class="p">,</span> <span class="n">BMI08_REG_ACCEL_CHIP_ID</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BMI085_I2C_ADDRESS_GYRO</span><span class="p">)</span>
</span><span id="__span-11-43"><a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>
</span><span id="__span-11-44"><a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Accel chip id: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">accel_chip_id</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-45"><a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gyro chip id: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">gyro_chip_id</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-46"><a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a>
</span><span id="__span-11-47"><a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a>        <span class="c1"># Deinit board</span>
</span><span id="__span-11-48"><a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-11-49"><a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">soft_reset</span><span class="p">()</span>
</span><span id="__span-11-50"><a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a>
</span><span id="__span-11-51"><a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">close_comm_interface</span><span class="p">()</span>    
</span></code></pre></div>
<p>The user shall pass GPIO pin numbers, read register address and I2C
device address for sensors based on the selected sensor shuttle board.
I2C communication require the proper setting of VDD and VDDIO using
<code>set_shuttleboard_vdd_vddio_config</code>.</p>
<h3 id="spi-config-and-read_1">SPI config and read<a class="headerlink" href="#spi-config-and-read_1" title="Permanent link">&para;</a></h3>
<p>This basic program shows how to configure and perform SPI read. Sensor:
BMI085</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="kn">import</span> <span class="nn">time</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    <span class="kn">import</span> <span class="nn">coinespy</span> <span class="k">as</span> <span class="nn">cpy</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="kn">from</span> <span class="nn">coinespy</span> <span class="kn">import</span> <span class="n">ErrorCodes</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="n">COM_INTF</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CommInterface</span><span class="o">.</span><span class="n">USB</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        <span class="n">BOARD</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CoinesBoard</span><span class="p">()</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">open_comm_interface</span><span class="p">(</span><span class="n">COM_INTF</span><span class="p">)</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="k">if</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">error_code</span> <span class="o">!=</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">COINES_SUCCESS</span><span class="p">:</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Open Communication interface: </span><span class="si">{</span><span class="n">BOARD</span><span class="o">.</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="n">BMI085_ACCEL_CS_PIN</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_8</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="n">BMI085_GYRO_CS_PIN</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_14</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>        <span class="n">BMI08_REG_ACCEL_CHIP_ID</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>        <span class="n">accel_dummy_byte_len</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="c1"># Config CS pin</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>            <span class="n">BMI085_ACCEL_CS_PIN</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>            <span class="n">BMI085_GYRO_CS_PIN</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>        <span class="c1"># Set PS pin of gyro to LOW for proper protocol selection</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_9</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinDirection</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">PinValue</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>        <span class="c1">#  SPI config</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">config_spi_bus</span><span class="p">(</span><span class="n">cpy</span><span class="o">.</span><span class="n">SPIBus</span><span class="o">.</span><span class="n">BUS_SPI_0</span><span class="p">,</span> <span class="n">BMI085_ACCEL_CS_PIN</span><span class="p">,</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>                             <span class="n">cpy</span><span class="o">.</span><span class="n">SPISpeed</span><span class="o">.</span><span class="n">SPI_1_MHZ</span><span class="p">,</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SPIMode</span><span class="o">.</span><span class="n">MODE0</span><span class="p">)</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mf">3.3</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mf">3.3</span><span class="p">)</span>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>        <span class="c1"># Initialize SPI by dummy read</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>        <span class="n">reg_data</span> <span class="o">=</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">read_spi</span><span class="p">(</span><span class="n">cpy</span><span class="o">.</span><span class="n">SPIBus</span><span class="o">.</span><span class="n">BUS_SPI_0</span><span class="p">,</span> <span class="n">BMI08_REG_ACCEL_CHIP_ID</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>        <span class="c1"># SPI read</span>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>        <span class="n">accel_chip_id</span> <span class="o">=</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">read_spi</span><span class="p">(</span>
</span><span id="__span-12-44"><a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">SPIBus</span><span class="o">.</span><span class="n">BUS_SPI_0</span><span class="p">,</span> <span class="n">BMI08_REG_ACCEL_CHIP_ID</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">accel_dummy_byte_len</span><span class="p">,</span> <span class="n">BMI085_ACCEL_CS_PIN</span><span class="p">)</span>
</span><span id="__span-12-45"><a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a>        <span class="n">gyro_chip_id</span> <span class="o">=</span> <span class="n">BOARD</span><span class="o">.</span><span class="n">read_spi</span><span class="p">(</span>
</span><span id="__span-12-46"><a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a>            <span class="n">cpy</span><span class="o">.</span><span class="n">SPIBus</span><span class="o">.</span><span class="n">BUS_SPI_0</span><span class="p">,</span> <span class="n">BMI08_REG_ACCEL_CHIP_ID</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BMI085_GYRO_CS_PIN</span><span class="p">)</span>
</span><span id="__span-12-47"><a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>
</span><span id="__span-12-48"><a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Accel chip id: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">accel_chip_id</span><span class="p">[</span><span class="n">accel_dummy_byte_len</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-49"><a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gyro chip id: </span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="n">gyro_chip_id</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-50"><a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a>
</span><span id="__span-12-51"><a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a>        <span class="c1"># Deinit board</span>
</span><span id="__span-12-52"><a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">set_shuttleboard_vdd_vddio_config</span><span class="p">(</span><span class="n">vdd_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vddio_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-12-53"><a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">soft_reset</span><span class="p">()</span>
</span><span id="__span-12-54"><a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a>
</span><span id="__span-12-55"><a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a>        <span class="n">BOARD</span><span class="o">.</span><span class="n">close_comm_interface</span><span class="p">()</span>
</span></code></pre></div>
<p>The user shall pass GPIO pin numbers, read register address and SPI CS
pins for sensors based on the selected sensor shuttle board. SPI
communication require the proper setting of VDD and VDDIO using
<code>set_shuttleboard_vdd_vddio_config</code>.</p>
<h1 id="debugging-via-vs-code">Debugging via VS code<a class="headerlink" href="#debugging-via-vs-code" title="Permanent link">&para;</a></h1>
<p>Here are the steps to follow to debug programs via VS code:</p>
<ul>
<li>
<p>Download Segger software from from
    <a href="https://www.segger.com/downloads/jlink/">https://www.segger.com/downloads/jlink/</a>.</p>
</li>
<li>
<p>Refer to <a href="https://wiki.segger.com/J-Link_Visual_Studio_Code">https://wiki.segger.com/J-Link_Visual_Studio_Code</a> for
    using J-link with VS code.</p>
</li>
<li>
<p>Download the NRF5 .svd file from Nordic Semiconductor github.</p>
</li>
<li>
<p>Connect J-link to SWD debugger connector.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/App31_jlink_connection.png"
style="width:25.0%" />
</div>
<figcaption>APP3.1 Debugger connector</figcaption>
</figure></p>
</li>
<li>
<p>Below is the sample launch.json config for VS code debug.</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Debug_launch_json.png" style="width:80.0%" />
</div>
<figcaption>VS code debug launch.json</figcaption>
</figure></p>
</li>
</ul>
<h1 id="media-transfer-protocol-mtp-firmware-for-app3x">Media Transfer Protocol (MTP) firmware for APP3.x<a class="headerlink" href="#media-transfer-protocol-mtp-firmware-for-app3x" title="Permanent link">&para;</a></h1>
<p>The external memory chip W25M02/W25N02 on APP3.x is based on NAND flash.</p>
<p>FAT filesystem on NAND flash memory results in a complicated solution
which uses of lot of RAM. Moreover use of FAT without Flash Translation
Layer (to save RAM) wears out NAND flash with frequent usage. Hence the
choice of <a href="https://github.com/conservify/FLogFS">FlogFS</a>, a filesystem
optimized for use with NAND flash.</p>
<p>But the use of 'FlogFS', presents a new problem 'Filesystem access from
PC via USB'. Use of 'FlogFS' with USB Mass Storage protocol is not
possible because operating system can't recognize 'FlogFS' as a valid
filesystem.</p>
<p>Use of custom protocol to do filesystem operations would mean
re-inventing the wheel and a lot of effort. User also would not have the
same experience as with USB Mass Storage.</p>
<p>Solution was to go with the \"Media Transfer Protocol\" developed
initially by Microsoft for Portable Devices like MP3 players. Starting
from Android Kitkat (v4.4), MTP is the only way to access files on an
Android device since the whole flash memory (included user storage
space) uses filesystems like ext4, YAFFS, F2FS, etc.,</p>
<p>Files in APP3.x's NAND flash memory can be viewed using the USB MTP
firmware.</p>
<p>Supported on Windows, Linux, macOS and Android (via USB OTG).</p>
<figure>
<div class="center">
<img src="coinesAPI_images/MTP_windows.png" style="width:70.0%" />
</div>
<figcaption>APP3.x in MTP mode on Windows</figcaption>
</figure>

<figure>
<div class="center">
<img src="coinesAPI_images/MTP_Ubuntu_Nautilus.png"
style="width:70.0%" />
</div>
<figcaption>APP3.x in MTP mode on Linux</figcaption>
</figure>

<figure>
<div class="center">
<img src="coinesAPI_images/MTP_Android_2.png" style="width:50.0%" />
</div>
<figcaption>APP3.x in MTP mode on Andriod</figcaption>
</figure>

<figure>
<div class="center">
<img src="coinesAPI_images/MTP_Android_3.png" style="width:70.0%" />
</div>
<figcaption>Files in external memory listed on Andriod
device</figcaption>
</figure>

<h2 id="copying-the-files-using-mtp">Copying the files using MTP<a class="headerlink" href="#copying-the-files-using-mtp" title="Permanent link">&para;</a></h2>
<p>The following procedure demonstrates how to copy files using MTP:</p>
<ul>
<li>
<p>APP3.x comes with the preloaded MTP firmware update package.</p>
</li>
<li>
<p>Refer to section <a href="#SwitchModes">12</a>{reference-type="ref"
    reference="SwitchModes"} to switch to MTP mode</p>
</li>
<li>
<p>The device will enumerate as an MTP device with name \"Application
    Board 3.x\". Click on it and select the \"W25M02 External Memory\"</p>
</li>
<li>
<p>The device will list all the available files and all required files
    can be copied.</p>
</li>
</ul>
<figure>
<div class="center">
<img src="coinesAPI_images/MTP_windows.png" style="width:70.0%" />
</div>
<figcaption>Copy data log files to the PC over USB MTP</figcaption>
</figure>

<h1 id="usbble-dfu-bootloader">USB/BLE DFU bootloader<a class="headerlink" href="#usbble-dfu-bootloader" title="Permanent link">&para;</a></h1>
<p>A USB/BLE Bootloader for APP3.x/nRF52840 and Nicla Sense ME/nRF52832
chip comply with below items:</p>
<ul>
<li>
<p><a href="https://www.usb.org/sites/default/files/DFU_1.1.pdf">https://www.usb.org/sites/default/files/DFU_1.1.pdf</a></p>
</li>
<li>
<p><a href="https://infocenter.nordicsemi.com/index.jsp?topic=%2Fcom.nordic.infocenter.sdk5.v15.2.0%2Fble_sdk_app_dfu_bootloader.html&amp;cp=9_5_3_4_1_3">nRF5 SDK v15.2.0 - BLE Secure DFU
    Bootloader</a></p>
</li>
</ul>
<h2 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h2>
<h3 id="usb-dfu">USB DFU<a class="headerlink" href="#usb-dfu" title="Permanent link">&para;</a></h3>
<p>The key features of USB DFU are as follows:</p>
<ul>
<li>
<p>Code download to RAM or FLASH</p>
</li>
<li>
<p>Code read back (upload) from RAM or FLASH (Useful for taking
    firmware backups)</p>
</li>
<li>
<p>Works with Windows, Linux, macOS and Android.</p>
</li>
</ul>
<h3 id="ble-dfu">BLE DFU<a class="headerlink" href="#ble-dfu" title="Permanent link">&para;</a></h3>
<p>The key features of BLE DFU are as follows:</p>
<ul>
<li>
<p>Code download to FLASH.</p>
</li>
<li>
<p>Works with PC and mobile devices with iOS/Android.</p>
</li>
</ul>
<p>Bootloader was written taking into account the following aspects:</p>
<ul>
<li>
<p>Usability.</p>
<ol>
<li>
<p>No special driver installation or admin rights should be
    required.</p>
</li>
<li>
<p>The update process should be straight forward.</p>
</li>
</ol>
</li>
<li>
<p>Maintainability</p>
<ol>
<li>
<p>Open source community takes care of PC side tools. For eg:
    dfu-util is a cross platform tool.</p>
</li>
<li>
<p>Use Google Chrome's WebUSB to update firmware. Sample
    implementation <a href="https://devanlai.github.io/webdfu/dfu-util/">https://devanlai.github.io/webdfu/dfu-util/</a></p>
</li>
</ol>
</li>
<li>
<p>Size</p>
</li>
<li>
<p>COINES on MCU.</p>
</li>
</ul>
<h2 id="invoking-the-bootloader">Invoking the Bootloader<a class="headerlink" href="#invoking-the-bootloader" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>To invoke Bootloader from Hardware, switch the board to bootloader
    mode (refer to section <a href="#SwitchModes">12</a>{reference-type="ref"
    reference="SwitchModes"}).</p>
</li>
<li>
<p>To invoke Bootloader from Software, use the below snippets in your
    program based on the board selected.</p>
</li>
<li>
<p>APP3.x</p>
<ol>
<li>
<p>Write 0x4E494F43 ('N','I','O','C') to MAGIC_LOCATION
    (0x2003FFF4)</p>
</li>
<li>
<p>Write 0x0 or 0xF0000 to APP_START_ADDR (0x2003FFF8)</p>
</li>
<li>
<p>Call NVIC_SystemReset()</p>
<div class="language-objectivec highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">        </span><span class="cp">#define  MAGIC_LOCATION (0x2003FFF4)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">        </span><span class="cp">#define  APP_START_ADDR (*(uint32_t *)(MAGIC_LOCATION+4)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">        </span><span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">MAGIC_LOCATION</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">0x4E494F43</span><span class="p">;</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">        </span><span class="n">APP_START_ADDR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xF0000</span><span class="p">;</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">        </span><span class="c1">//APP_START_ADDR = 0x0;</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">        </span><span class="n">NVIC_SystemReset</span><span class="p">();</span>
</span></code></pre></div>
</li>
</ol>
</li>
</ol>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>&lt;!-- --&gt;
</span></code></pre></div>
-   Nicla Sense ME Board</p>
<div class="language-text highlight"><pre><span></span><code>1.  Write 0x544F4F42 (&#39;T&#39;,&#39;O&#39;,&#39;O&#39;,&#39;B&#39;) to MAGIC_LOCATION
    (0x2000F804)

2.  Call NVIC_SystemReset()

    ``` {.objectivec language=&quot;C&quot;}

            #define  MAGIC_LOCATION (0x2000F804)
            #define  APP_START_ADDR (*(uint32_t *)(MAGIC_LOCATION+4)

            *((uint32_t *)MAGIC_LOCATION) == 0x544F4F42;
            NVIC_SystemReset();

    ```
</code></pre></div>
<p>It is to be noted that the same feature can also be used to perform
application switch ( 2 or more applications can reside in the same flash
memory at different address locations ). Just write the application
start address to APP_START_ADDR instead of bootloader address</p>
<h2 id="using-the-bootloader-via-usb">Using the Bootloader via USB<a class="headerlink" href="#using-the-bootloader-via-usb" title="Permanent link">&para;</a></h2>
<p>The commands below demonstrate how to use dfu-util for different
scenarios:</p>
<ul>
<li>Path to dfu-util:</li>
</ul>
<p>Write firmware to Flash memory using following command</p>
<ul>
<li>dfu-util -a FLASH -D \&lt;firmware&gt;.bin -R</li>
</ul>
<p>Write firmware to RAM memory using following command</p>
<ul>
<li>dfu-util -a RAM -D \&lt;firmware&gt;.bin -R</li>
</ul>
<p>Read firmware from Flash memory using following command</p>
<ul>
<li>dfu-util -a FLASH -U \&lt;firmware&gt;.bin</li>
</ul>
<p>Read firmware from RAM memory using following command</p>
<ul>
<li>dfu-util -a RAM -U \&lt;firmware&gt;.bin</li>
</ul>
<p>Read device serial number/ BLE MAC address</p>
<ul>
<li>
<p>dfu-util -l</p>
<p>Note: Not applicable for Nicla Sense ME board</p>
</li>
</ul>
<h2 id="using-the-bootloader-via-ble">Using the Bootloader via BLE<a class="headerlink" href="#using-the-bootloader-via-ble" title="Permanent link">&para;</a></h2>
<p>To update the bootloader firmware via BLE, proceed as follows:</p>
<ul>
<li>
<p>PC (Windows, Linux or macOS) Python script present in following path
    can use the binary file directly.</p>
<ol>
<li>
<p>Refer to section <a href="#SwitchModes">12</a>{reference-type="ref"
    reference="SwitchModes"} to switch to Bootloader mode</p>
</li>
<li>
<p>Run the command:</p>
<ul>
<li><code>pip install -r requirements.txt</code></li>
</ul>
</li>
<li>
<p>Scan for devices to find BLE MAC address using below command</p>
<ul>
<li><code>python app30-ble-dfu.py -l</code></li>
</ul>
</li>
<li>
<p>Update firmware by using MAC address obtained in the previous
    step and firmware BIN file</p>
<ul>
<li><code>python app30-ble-dfu.py -d D7:A3:CE:8E:36:14 -f &lt;firmware&gt;.bin</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p>Android devices</p>
<ol>
<li>
<p>Generate ZIP package using
    <a href="https://pypi.org/project/adafruit-nrfutil/">https://pypi.org/project/adafruit-nrfutil/</a> before using nRF
    ToolBox for BLE or nRF connect for mobile.</p>
<ul>
<li><code>adafruit-nrfutil dfu genpkg dev-type 0x0052 application &lt;firmware&gt;.bin dfu-package.zip</code></li>
</ul>
</li>
</ol>
<p>Note: Not applicable for Nicla Sense ME board</p>
</li>
</ul>
<h1 id="SwitchModes">Switching to Operating Modes<a class="headerlink" href="#SwitchModes" title="Permanent link">&para;</a></h1>
<h2 id="app20-or-app3x">APP2.0 (or) APP3.x<a class="headerlink" href="#app20-or-app3x" title="Permanent link">&para;</a></h2>
<p>The process for switching modes for the Application board involves these
steps:</p>
<ul>
<li>
<p>Bootloader mode - Turn OFF and ON the board with T2 pressed, blue
    LED glows indicating that the board switched to bootloader mode.</p>
</li>
<li>
<p>MTP mode - Turn OFF and ON the board with T1 pressed, green LED
    glows indicating that the board switched to MTP mode.</p>
</li>
</ul>
<h2 id="nicla-sense-me-board">Nicla Sense ME board<a class="headerlink" href="#nicla-sense-me-board" title="Permanent link">&para;</a></h2>
<p>The process for switching modes for the Nicla Sense ME board involves
these steps:</p>
<ul>
<li>
<p>Bootloader mode - Press three times reset button, blue LED glows
    indicating that the board switched to bootloader mode.</p>
</li>
<li>
<p>Application Mode - Press three times reset button to switch to
    application mode</p>
</li>
</ul>
<h1 id="firmwareUpdate">Updating Bootloader and MTP firmware using COINES<a class="headerlink" href="#firmwareUpdate" title="Permanent link">&para;</a></h1>
<p>To update the firmware, follow these steps:</p>
<h1 id="faqs">FAQs<a class="headerlink" href="#faqs" title="Permanent link">&para;</a></h1>
<ol>
<li>
<p><strong>What to do in case of any communication or initialization failure
    while running examples?</strong> Resetting or rebooting the board will help
    solving such issues.</p>
</li>
<li>
<p><strong>Why is there no output in my terminal application after
    cross-compiling and downloading an example on the MCU?</strong> The code
    example on the MCU waits until the serial port of the board is
    opened. However, opening the port is not enough, the user has to
    ensure that also the DTR signal is set (this is required due to have
    higher compatibiliy among different terminal applications).</p>
</li>
<li>
<p><strong>How to fix libusb not found issue on macOS (arm64)?</strong></p>
<p>Please try the below steps to fix the issue.</p>
<ol>
<li>
<p>Install libusb: Libusb will be automatically installed as part
    of the COINES installation. However, If it's not installed
    automatically, you can use Homebrew to install it.
    <code>brew install libusb</code> After running above command, libusb should
    be installed on your system. On Intel Mac: On M1 Mac:</p>
</li>
<li>
<p>Add the path in</p>
<p><figure>
<div class="center">
<img src="coinesAPI_images/Mac_libusb_include.png"
style="width:60.0%" />
</div>
<figcaption>COINES file structure</figcaption>
</figure></p>
</li>
</ol>
</li>
<li>
<p><strong>How do I recover the original program when bootloader was erased
    accidentally on Application Board 3.x?</strong> COINES SDK does not provide
    a way to restore the board to original state.</p>
</li>
<li>
<p><strong>How to run multiple application boards using COINES in a single
    computer?</strong> When multiple USB devices are connected to a PC, by
    configuring Serial COM settings for a script, one can communicate
    with them separately. Please refer to
    <a href="#serialComConfig">8.1.10</a>{reference-type="ref"
    reference="serialComConfig"} for implementation.</p>
</li>
</ol>
<p>For more FAQs, visit <a href="https://community.bosch-sensortec.com/t5/MEMS-sensors-forum/bd-p/bst_community-mems-forum">Bosch Sensortec MEMS sensors
forum</a>.</p>
<h1 id="annexure">Annexure<a class="headerlink" href="#annexure" title="Permanent link">&para;</a></h1>
<h2 id="gpio-mapping">GPIO mapping<a class="headerlink" href="#gpio-mapping" title="Permanent link">&para;</a></h2>
<h3 id="gpio-mapping-of-app20-shuttle-board-pins">GPIO mapping of APP2.0 shuttle board pins<a class="headerlink" href="#gpio-mapping-of-app20-shuttle-board-pins" title="Permanent link">&para;</a></h3>
<p>The APP2.0 shuttle board has total of 28 pins, of which some have a
predefined functionality and some can be used as GPIO by the user.</p>
<p>The shuttle board connector details are given in the table below.</p>
<p>::: {#tab:shtbrdpins}</p>
<hr />
<p><strong>Pin number on</strong>         <strong>Name /</strong>         <strong>Pin number on</strong>      <strong>Name /</strong>
   <strong>shuttle board</strong>        <strong>function</strong>        <strong>shuttle board</strong>     <strong>function</strong>
           1                 VDD (3.3V)                28             SHTLE_COD #4
           2                VDDIO (3.3V)               27             SHTLE_COD #3
           3                    GND                    26             SHTLE_COD #2
           4                  SPI MISO                 25             SHTLE_COD #1
           5           SPI: MOSI / I<sup>2</sup>C: SDA          24             SHTLE_COD #0
           6           SPI: SCK / I<sup>2</sup>C: SCL           23            SHTLE_COD_GND
           7                  SPI: CS                  22           IO_4 ( GPIO #4 )
           8              IO_5 ( GPIO #5 )             21           IO_7 ( GPIO #7 )
           9              IO_0 ( GPIO #0 )             20           IO_6 ( GPIO #6 )
          10                SHTLE_COD #5               19           IO_8 ( GPIO #8 )
          11                SHTLE_COD #6               18            SCL (see note)
          12                SHTLE_COD #7               17            SDA (see note)
          13                SHTLE_COD #8               16           IO_3 ( GPIO #3 )
          14              IO_1 ( GPIO #1 )             15           IO_2 ( GPIO #2 )</p>
<hr />
<p>: Overview of shuttle board pins and their function
:::</p>
<p>Note:</p>
<ul>
<li>
<p>In COINES functions, the pins are addressed using the same numbers
    as on the shuttle board. For example, the GPIO #5 has the pin number
    8.</p>
</li>
<li>
<p>In some cases (depending on the sensor), the I<sup>2</sup>C lines are shuttle
    board pin 6 for the clock signal SCL and shuttle board pin 5 for the
    data line SDA. In such cases pins 17 and 18 may not be connected.
    Please carefully read the shuttle board documentation.</p>
</li>
</ul>
<h3 id="gpio-mapping-of-app3x-shuttle-board-pins">GPIO mapping of APP3.x shuttle board pins<a class="headerlink" href="#gpio-mapping-of-app3x-shuttle-board-pins" title="Permanent link">&para;</a></h3>
<p>The APP3.x shuttle board has a total of 16 pins, 7 on the left and 9 on
the right. (with shuttle board pins facing downwards)</p>
<p>Note:</p>
<ul>
<li>
<p>In COINES functions, the pins are addressed as on the APP3.x shuttle
    board. For example, the GPIO #5 is addressed as
    <code>COINES_MINI_SHUTTLE_PIN_2_6</code>.</p>
</li>
<li>
<p>Supported VDD voltages on APP3.x are 0, 1.8V and 2.8V.</p>
</li>
<li>
<p>Supported VDDIO voltage on APP3.x is 1.8V.</p>
</li>
</ul>
<p>::: {#tab:shtbrdpins}</p>
<hr />
<p><strong>Pin number on</strong>     <strong>Name /</strong>     <strong>Pin number on</strong>         <strong>Name /</strong>
   <strong>shuttle board</strong>    <strong>function</strong>    <strong>shuttle board</strong>        <strong>function</strong>
          1_1          VDD (1.8/2.8V)          2_1                  SPI_CS
          1_2           VDDIO (1.8)            2_2          SPI: SCK / I<sup>2</sup>C: SCL
          1_3               GND                2_3                SPI: MISO
          1_4              GPIO0               2_4          SPI: MOSI / I<sup>2</sup>C: SDA
          1_5              GPIO1               2_5                GPIO4<sup>*</sup>
          1_6              GPIO2               2_6                GPIO5<sup>*</sup>
          1_7              GPIO3               2_7               IOXP_INT<sup>*</sup>
                                               2_8               PlugDet<sup>*</sup>
                                               2_9                EEPROM_RW</p>
<hr />
<p>: Overview of APP3.x shuttle board pins and their function
:::</p>
<p><sup>*</sup>SPI pins for secondary interface - CS:GPIO4, SCK:GPIO5,
MISO:IOXP_INT, MOSI:PlugDet</p>
<h2 id="CoinesCFunctions">COINES C functions<a class="headerlink" href="#CoinesCFunctions" title="Permanent link">&para;</a></h2>
<h3 id="coinesapi-calls-interface-and-board-information">coinesAPI calls: Interface and board information<a class="headerlink" href="#coinesapi-calls-interface-and-board-information" title="Permanent link">&para;</a></h3>
<h4 id="coines_open_comm_intf">coines_open_comm_intf<a class="headerlink" href="#coines_open_comm_intf" title="Permanent link">&para;</a></h4>
<p>Opens the communication interface.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_open_comm_intf(enum coines_comm_intf intf_type,void *arg);
</code></pre></div>
<p>In case of MCU Target, API waits indefinitely for serial port or BLE
connection (<code>MCU_APP30</code> target and <code>MCU_APP31</code> target).</p>
<p>In case of PC Target, one can configure communication settings either by
passing the address of <code>coines_serial_com_config</code> or
<code>ble_peripheral_info</code> to <code>*arg</code>.</p>
<p>Serialcomconfiguration: If <code>*arg</code> is NULL for <code>COINES_COMM_INTF_USB</code>,
first com port enumerated will be used for communication. The serial com
configuration structure contains the following items. Refer to
<a href="#serialComConfig">8.1.10</a>{reference-type="ref"
reference="serialComConfig"} for its implementation.</p>
<div class="language-text highlight"><pre><span></span><code>struct coines_serial_com_config
{
    uint32_t baud_rate; /*&lt; Baud rate */
    uint16_t vendor_id; /*&lt; vendor Id */
    uint16_t product_id; /*&lt; Product Id */
    char* com_port_name; /*&lt; serial com port name */
    uint16_t rx_buffer_size; /*&lt; RX response buffer size */
};
</code></pre></div>
<p>BLEcomconfiguration: If <code>*arg</code> is NULL for <code>COINES_COMM_INTF_BLE</code>, the
nearest Application board for the host BLE will be used for
communication. The ble com configuration structure contains the
following items. Refer to <a href="#bleComConfig">8.1.9</a>{reference-type="ref"
reference="bleComConfig"} for its implementation.</p>
<div class="language-text highlight"><pre><span></span><code>struct ble_peripheral_info
{
    char ble_address[COINES_CHAR_MAX_LEN]; /*&lt; BLE device address */
    char ble_identifier[COINES_CHAR_MAX_LEN]; /*&lt; BLE device identifier */
};
</code></pre></div>
<h4 id="coines_close_comm_intf">coines_close_comm_intf<a class="headerlink" href="#coines_close_comm_intf" title="Permanent link">&para;</a></h4>
<p>Closes the communication interface.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_close_comm_intf(enum coines_comm_intf intf_type,void *arg);
</code></pre></div>
<h4 id="coines_get_board_info">coines_get_board_info<a class="headerlink" href="#coines_get_board_info" title="Permanent link">&para;</a></h4>
<p>Gets the board information.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_get_board_info(struct coines_board_info *data);
</code></pre></div>
<p>The data structure contains the following items</p>
<div class="language-text highlight"><pre><span></span><code>struct coines_board_info {
    /*!Board hardware ID */
    uint16_t hardware_id;
    /*!Board software ID */
    uint16_t software_id;
    /*!Type of the board like APP2.0, Arduino Due*/
    uint8_t board;
    /*!Shuttle ID of the sensor connected*/
    uint16_t shuttle_id;
};
</code></pre></div>
<h3 id="coinesapi-calls-gpio-oriented-calls">coinesAPI calls: GPIO oriented calls<a class="headerlink" href="#coinesapi-calls-gpio-oriented-calls" title="Permanent link">&para;</a></h3>
<h4 id="coines_set_pin_config">coines_set_pin_config<a class="headerlink" href="#coines_set_pin_config" title="Permanent link">&para;</a></h4>
<p>Sets the pin direction and the state.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_set_pin_config(enum coines_multi_io_pin pin_number, enum coines_pin_direction direction, enum coines_pin_value pin_value);
</code></pre></div>
<h4 id="coines_get_pin_config">coines_get_pin_config<a class="headerlink" href="#coines_get_pin_config" title="Permanent link">&para;</a></h4>
<p>Gets the pin configuration.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_get_pin_config(enum coines_multi_io_pin pin_number, enum coines_pin_direction *pin_direction, enum coines_pin_value *pin_value);
</code></pre></div>
<h4 id="coines_set_shuttleboard_vdd_vddio_config">coines_set_shuttleboard_vdd_vddio_config<a class="headerlink" href="#coines_set_shuttleboard_vdd_vddio_config" title="Permanent link">&para;</a></h4>
<p>Configures the VDD and VDDIO of the sensor. For APP2.0, a voltage level
of 0 or 3300 mV is supported. Any values above 0 will default to 3300
mV.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_set_shuttleboard_vdd_vddio_config(uint16_t vdd_millivolt, uint16_t vddio_millivolt);
</code></pre></div>
<h3 id="coinesapi-calls-sensor-communication">coinesAPI calls: Sensor communication<a class="headerlink" href="#coinesapi-calls-sensor-communication" title="Permanent link">&para;</a></h3>
<h4 id="coines_config_i2c_bus">coines_config_i2c_bus<a class="headerlink" href="#coines_config_i2c_bus" title="Permanent link">&para;</a></h4>
<p>Configures the I<sup>2</sup>C bus.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_config_i2c_bus(enum coines_i2c_bus bus, enum coines_i2c_mode i2c_mode);
</code></pre></div>
<p>The first argument refers to the bus on the board. Currently, on APP2.0,
there is only one bus available, so the argument is always
COINES_I2C_BUS_0.</p>
<p>The following I<sup>2</sup>C modes are available:</p>
<div class="language-text highlight"><pre><span></span><code>COINES_I2C_STANDARD_MODE
COINES_I2C_FAST_MODE
COINES_I2C_SPEED_3_4_MHZ
COINES_I2C_SPEED_1_7_MHZ
</code></pre></div>
<h4 id="coines_config_spi_bus">coines_config_spi_bus<a class="headerlink" href="#coines_config_spi_bus" title="Permanent link">&para;</a></h4>
<p>Configures the SPI bus of the board. The argument coines_spi_bus refers
to the bus on the board. On APP2.0, there is only one bus available, so
the user should only use COINES_SPI_BUS_0. The SPI speed can be chosen
in various discrete steps, as defined in enum coines_spi_speed in
coines.h. (For example, COINES_SPI_SPEED_2_MHZ sets the SPI speed to 2
MHz.)</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_config_spi_bus(enum coines_spi_bus bus, uint32_t spi_speed, enum coines_spi_mode spi_mode);
</code></pre></div>
<h4 id="coines_config_i2s_bus">coines_config_i2s_bus<a class="headerlink" href="#coines_config_i2s_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to configure the I<sup>2</sup>S bus to match the TDM
configuration</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_config_i2s_bus(uint16_t data_words, coines_tdm_callback callback);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>data_words</code>: number of words to use in the buffer. Max is set at
    COINES_TDM_BUFFER_SIZE_WORDS.</p>
</li>
<li>
<p><code>callback</code>: register a callback to be called to process and copy the
    data.</p>
</li>
</ul>
<h4 id="coines_deconfig_spi_bus">coines_deconfig_spi_bus<a class="headerlink" href="#coines_deconfig_spi_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to de-configure the SPI bus</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_deconfig_spi_bus(enum coines_spi_bus bus);
</code></pre></div>
<h4 id="coines_deconfig_i2c_bus">coines_deconfig_i2c_bus<a class="headerlink" href="#coines_deconfig_i2c_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to de-configure the I<sup>2</sup>C bus</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_deconfig_i2c_bus(enum coines_i2c_bus bus);
</code></pre></div>
<h4 id="coines_deconfig_i2s_bus">coines_deconfig_i2s_bus<a class="headerlink" href="#coines_deconfig_i2s_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to stop the I<sup>2</sup>S/TDM interface from reading data from
the sensor</p>
<div class="language-text highlight"><pre><span></span><code>void coines_deconfig_i2s_bus(void);
</code></pre></div>
<h4 id="CoinesWriteI2c">coines_write_i2c<a class="headerlink" href="#CoinesWriteI2c" title="Permanent link">&para;</a></h4>
<p>Writes 8-bit register data to the I<sup>2</sup>C device at <code>COINES_I2C_BUS_0</code>.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_write_i2c(enum coines_i2c_bus bus,uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint16_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: I<sup>2</sup>C bus to be used</p>
</li>
<li>
<p><code>dev_addr</code>: I<sup>2</sup>C device address.</p>
</li>
<li>
<p><code>reg_addr</code>: Starting address for writing the data.</p>
</li>
<li>
<p><code>reg_data</code>: Data to be written.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to write.</p>
</li>
</ul>
<h4 id="CoinesReadI2c">coines_read_i2c<a class="headerlink" href="#CoinesReadI2c" title="Permanent link">&para;</a></h4>
<p>Reads 8-bit register data from the I<sup>2</sup>C device at <code>COINES_I2C_BUS_0</code>.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_read_i2c(enum coines_i2c_bus bus,uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint16_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: I<sup>2</sup>C bus to be used</p>
</li>
<li>
<p><code>dev_addr</code>: I<sup>2</sup>C device address.</p>
</li>
<li>
<p><code>reg_addr</code>: Starting address for reading the data.</p>
</li>
<li>
<p><code>reg_data</code>: Buffer to take up the read data.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to read.</p>
</li>
</ul>
<h4 id="coines_i2c_set">coines_i2c_set<a class="headerlink" href="#coines_i2c_set" title="Permanent link">&para;</a></h4>
<p>This API is used to write the data in I2C communication.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_i2c_set(enum coines_i2c_bus bus, uint8_t dev_addr, uint8_t *data, uint8_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: I<sup>2</sup>C bus to be used</p>
</li>
<li>
<p><code>dev_addr</code>: I<sup>2</sup>C device address.</p>
</li>
<li>
<p><code>data</code>: Data to be written.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to write.</p>
</li>
</ul>
<h4 id="coines_i2c_get">coines_i2c_get<a class="headerlink" href="#coines_i2c_get" title="Permanent link">&para;</a></h4>
<p>This API is used to read the data in I2C communication.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_i2c_get(enum coines_i2c_bus bus, uint8_t dev_addr, uint8_t *data, uint8_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: I<sup>2</sup>C bus to be used</p>
</li>
<li>
<p><code>dev_addr</code>: I<sup>2</sup>C device address.</p>
</li>
<li>
<p><code>data</code>: Data read from the sensor.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to read.</p>
</li>
</ul>
<h4 id="CoinesWriteSpi">coines_write_spi<a class="headerlink" href="#CoinesWriteSpi" title="Permanent link">&para;</a></h4>
<p>Writes 8-bit register data to the SPI device at <code>COINES_SPI_BUS_0</code>.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_write_spi(enum coines_spi_bus bus,uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint16_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: SPI bus to be used.</p>
</li>
<li>
<p><code>dev_addr</code>: Chip select pin number.</p>
</li>
<li>
<p><code>reg_addr</code>: Starting address for writing the data.</p>
</li>
<li>
<p><code>reg_data</code>: Data to be written.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to write.</p>
</li>
</ul>
<h4 id="CoinesReadSpi">coines_read_spi<a class="headerlink" href="#CoinesReadSpi" title="Permanent link">&para;</a></h4>
<p>Reads 8-bit register data from the SPI device at <code>COINES_SPI_BUS_0</code>.</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_read_spi(enum coines_spi_bus bus,uint8_t dev_addr, uint8_t reg_addr, uint8_t *reg_data, uint16_t count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bus</code>: SPI bus to be used.</p>
</li>
<li>
<p><code>dev_addr</code>: Chip select pin number.</p>
</li>
<li>
<p><code>reg_addr</code>: Starting address for reading the data.</p>
</li>
<li>
<p><code>reg_data</code>: Buffer to take up the read data.</p>
</li>
<li>
<p><code>count</code>: Number of bytes to read.</p>
</li>
</ul>
<h4 id="coines_delay_msec">coines_delay_msec<a class="headerlink" href="#coines_delay_msec" title="Permanent link">&para;</a></h4>
<p>Introduces delay in millisecond.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_delay_msec(uint32_t delay_ms);
</code></pre></div>
<h4 id="coines_delay_usec">coines_delay_usec<a class="headerlink" href="#coines_delay_usec" title="Permanent link">&para;</a></h4>
<p>Introduces delay in microsecond.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_delay_usec(uint32_t delay_us);
</code></pre></div>
<h4 id="coines_uart_init">coines_uart_init<a class="headerlink" href="#coines_uart_init" title="Permanent link">&para;</a></h4>
<p>This API is used to initialize the UART communication</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_uart_init(enum coines_uart_instance uart_instance, enum coines_uart_parity parity, enum coines_uart_flow_control flow_control, uint32_t baud_rate);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>uart_instance</code>: Specifies the UART instance</p>
</li>
<li>
<p><code>parity</code>: UART parity</p>
</li>
<li>
<p><code>flow_control</code>: UART flow control mode</p>
</li>
<li>
<p><code>baud_rate</code>: UART baud rate</p>
</li>
</ul>
<h4 id="coines_uart_read">coines_uart_read<a class="headerlink" href="#coines_uart_read" title="Permanent link">&para;</a></h4>
<p>This API is used to read the data in UART communication</p>
<div class="language-text highlight"><pre><span></span><code>uint16_t coines_uart_read(enum coines_uart_instance uart_instance, uint8_t *buffer, uint16_t length);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>uart_instance</code>: Specifies the UART instance</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the buffer to store the data</p>
</li>
<li>
<p><code>length</code>: Length of the buffer</p>
</li>
</ul>
<h4 id="coines_uart_write">coines_uart_write<a class="headerlink" href="#coines_uart_write" title="Permanent link">&para;</a></h4>
<p>This API is used to write the data in UART communication</p>
<div class="language-text highlight"><pre><span></span><code>int8_t coines_uart_write(enum coines_uart_instance uart_instance, uint8_t *buffer, uint16_t length);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>uart_instance</code>: Specifies the UART instance</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the data buffer which need to be written</p>
</li>
<li>
<p><code>length</code>: Length of the buffer</p>
</li>
</ul>
<h3 id="coinesapi-calls-streaming-feature">coinesAPI calls: Streaming feature<a class="headerlink" href="#coinesapi-calls-streaming-feature" title="Permanent link">&para;</a></h3>
<p>Note :</p>
<ol>
<li>
<p>The below APIs are supported only on PC Target.</p>
</li>
<li>
<p>A simpler approach of using <code>coines_attach_interrupt()</code> API for is
    available for MCU.</p>
</li>
</ol>
<h4 id="coines_config_streaming">coines_config_streaming<a class="headerlink" href="#coines_config_streaming" title="Permanent link">&para;</a></h4>
<p>Sets the configuration for streaming sensor data.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_config_streaming(uint8_t channel_id, struct coines_streaming_config *stream_config, struct coines_streaming_blocks *data_blocks);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>channel_id</code>: An integer number that can be used as identifier/index
    to the sensor data that will be streamed for this setting</p>
</li>
<li>
<p><code>stream_config</code>: Contains information regarding interface settings
    and streaming configuration.</p>
</li>
<li>
<p><code>coines_streaming_blocks</code>: Contains information regarding numbers of
    blocks to read, register address and size for each block.</p>
</li>
</ul>
<p>Note: The below parameters should always be set:</p>
<ul>
<li>
<p><code>data_block.no_of_blocks</code>: number of blocks to stream (must at least
    be one)</p>
</li>
<li>
<p>For each block b:</p>
<ul>
<li>
<p><code>data_block.reg_start_addr[b]</code>: start address of the block in
    the register map</p>
</li>
<li>
<p><code>stream_block.no_of_data_bytes[b]</code>: number of bytes to read,
    starting from the start address</p>
</li>
</ul>
</li>
</ul>
<p>For reading data from I<sup>2</sup>C bus,then set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.intf = COINES_SENSOR_INTF_I2C;</code></p>
</li>
<li>
<p><code>stream_config.i2c_bus</code>: I<sup>2</sup>C bus (in case of APP2.0, this is
    always <code>COINES_I2C_BUS_0</code>)</p>
</li>
<li>
<p><code>stream_config.dev_addr</code>: I<sup>2</sup>C address of the sensor</p>
</li>
</ul>
<p>For reading data from SPI bus, then set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.intf = COINES_SENSOR_INTF_SPI;</code></p>
</li>
<li>
<p><code>stream_config.spi_bus</code>: SPI bus (in case of APP2.0, this is always
    <code>COINES_SPI_BUS_0</code>)</p>
</li>
<li>
<p><code>stream_config.cs_pin</code>: CS pin of the sensor, information can be
    obtained from the shuttle board documentation for the sensor.</p>
</li>
</ul>
<p>When polling mode is requested, set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.sampling_units</code>:\
    either milliseconds (<code>COINES_SAMPLING_TIME_IN_MILLI_SEC</code>)\
    or microseconds (<code>COINES_SAMPLING_TIME_IN_MICRO_SEC</code>)</p>
</li>
<li>
<p><code>stream_config.sampling_time</code>: sampling period in the unit as
    defined in\
    <code>stream_config.sampling_units</code></p>
</li>
</ul>
<p>When interrupt mode is requested, set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.int_pin</code>: pin of the interrupt which shall trigger
    the sensor read-out. If the interrupt output of the sensor is used,
    the required information about the pin number can be obtained from
    the shuttle board documentation for the sensor.</p>
</li>
<li>
<p><code>stream_config.int_timestamp</code>: it can be configured if the sensor
    data is tagged with a timestamp (<code>COINES_TIMESTAMP_ENABLE</code>) or not
    (<code>COINES_TIMESTAMP_DISABLE</code>).</p>
</li>
</ul>
<h4 id="coines_start_stop_streaming">coines_start_stop_streaming<a class="headerlink" href="#coines_start_stop_streaming" title="Permanent link">&para;</a></h4>
<p>Starts or stops sensor data streaming.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_start_stop_streaming(enum coines_streaming_mode stream_mode, uint8_t start_stop);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>stream_mode</code>: streaming mode (either
    <code>COINES_STREAMING_MODE_POLLING</code> or\
    <code>COINES_STREAMING_MODE_INTERRUPT</code>)</p>
</li>
<li>
<p><code>start_stop</code>: flag to either start (<code>COINES_STREAMING_START</code>) or
    stop (<code>COINES_STREAMING_STOP</code>) the streaming</p>
</li>
</ul>
<h4 id="coinesReadStreamSensorData">coines_read_stream_sensor_data<a class="headerlink" href="#coinesReadStreamSensorData" title="Permanent link">&para;</a></h4>
<p>Reads the data streamed from the sensor.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_read_stream_sensor_data(uint8_t sensor_id, uint32_t number_of_samples, uint8_t *data, uint32_t *valid_samples_count);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>sensor_id</code>: id of the sensor</p>
</li>
<li>
<p><code>number_of_samples</code>: number of samples the user wishes to read (not
    implemented)</p>
</li>
<li>
<p><code>data</code>: data buffer</p>
<ul>
<li>
<p>Interrupt streaming - Packet counter + Register data + Timestamp</p>
</li>
<li>
<p>Polling streaming - Register data</p>
</li>
</ul>
</li>
<li>
<p><code>valid_samples_count</code>: number of samples the user has actually
    received (may be less than <code>number_of_samples</code>)</p>
</li>
</ul>
<p>Example of a packet:</p>
<p><img alt="Format of streaming
packages" src="coinesAPI_images/COINES_streamingSample" width="\textwidth" /></p>
<p>In the above figure, the following meaning apply to the mentioned
abreviations:</p>
<ul>
<li>
<p>r<sub>p</sub>: Value at register address p</p>
</li>
<li>
<p>a: Size of register block--0</p>
</li>
<li>
<p>r<sub>p+a</sub>: Value at register address p</p>
</li>
</ul>
<p>Similarly is the case for r<sub>q</sub>, j and r<sub>q+j</sub>. See the
<code>coines_streaming_blocks</code> structure for information regarding register
blocks.</p>
<p>The packet counter and the timestamp can be obtained as follows:</p>
<ul>
<li>
<p><code>packet_counter = (byte3_c &lt;&lt; 24) | (byte2_c &lt;&lt; 16) | (byte1_c &lt;&lt; 8) | (byte0_c)</code></p>
</li>
<li>
<p><code>timestamp = (byte5_t &lt;&lt; 40) | (byte4_t &lt;&lt; 32) | (byte3_t &lt;&lt; 24) | (byte2_t &lt;&lt; 16) | (byte1_t &lt;&lt; 8) | (byte0_t)</code></p>
</li>
</ul>
<p>The 48-bit timestamp is enabled by using\
<code>coines_trigger_timer(COINES_TIMER_START, COINES_TIMESTAMP_ENABLE);</code></p>
<p>Timestamp in microseconds can be obtained using below formula:</p>
<ul>
<li><span class="arithmatex">\(\displaystyle Timestamp\ (\mu s) = \frac{48bit\_timestamp}{30}\)</span></li>
</ul>
<h4 id="coines_trigger_timer">coines_trigger_timer<a class="headerlink" href="#coines_trigger_timer" title="Permanent link">&para;</a></h4>
<p>Triggers the timer in firmware and also enables or disables the time
stamp feature.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_trigger_timer(enum coines_timer_config tmr_cfg,enum coines_time_stamp_config ts_cfg);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>tmr_cfg</code>: start, stop or reset the timer (<code>COINES_TIMER_START</code>,
    <code>COINES_TIMER_STOP</code> or\
    <code>COINES_TIMER_RESET</code>)</p>
</li>
<li>
<p><code>ts_cfg</code>: Enables/disables microcontroller timestamp
    (<code>COINES_TIMESTAMP_ENABLE</code> or\
    <code>COINES_TIMESTAMP_DISABLE</code>)</p>
</li>
</ul>
<h3 id="coinesapi-calls-other-useful-apis">coinesAPI calls: Other useful APIs<a class="headerlink" href="#coinesapi-calls-other-useful-apis" title="Permanent link">&para;</a></h3>
<h4 id="coines_get_millis">coines_get_millis<a class="headerlink" href="#coines_get_millis" title="Permanent link">&para;</a></h4>
<p>Returns the number of milliseconds passed since the program started</p>
<div class="language-text highlight"><pre><span></span><code>uint32_t coines_get_millis();
</code></pre></div>
<h4 id="coines_get_micro_sec">coines_get_micro_sec<a class="headerlink" href="#coines_get_micro_sec" title="Permanent link">&para;</a></h4>
<p>Returns the number of microseconds passed since the program started</p>
<div class="language-text highlight"><pre><span></span><code>uint64_t coines_get_micro_sec();
</code></pre></div>
<h4 id="coines_attach_interrupt">coines_attach_interrupt<a class="headerlink" href="#coines_attach_interrupt" title="Permanent link">&para;</a></h4>
<p>Attaches an interrupt to a Multi-IO pin.Works only on MCU.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_attach_interrupt(enum coines_multi_io_pin pin_number,void (*callback)(uint32_t, uint32_t),enum coines_pin_interrupt_mode int_mode);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>pin_number</code>: Multi-IO pin</p>
</li>
<li>
<p><code>callback</code>: Name of the function to be called on detection of
    interrupt</p>
</li>
<li>
<p><code>int_mode</code>: Trigger modes - change (<code>COINES_PIN_INTERRUPT_CHANGE</code>),\
    rising edge (<code>COINES_PIN_INTERRUPT_RISING_EDGE</code>),\
    falling edge (<code>COINES_PIN_INTERRUPT_FALLING_EDGE</code>)</p>
</li>
</ul>
<h4 id="coines_detach_interrupt">coines_detach_interrupt<a class="headerlink" href="#coines_detach_interrupt" title="Permanent link">&para;</a></h4>
<p>Detaches interrupt from a Multi-IO pin.Works only on MCU.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_detach_interrupt(enum coines_multi_io_pin pin_number);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>pin_number</code>: Multi-IO pin.</li>
</ul>
<h4 id="coines_intf_available">coines_intf_available<a class="headerlink" href="#coines_intf_available" title="Permanent link">&para;</a></h4>
<p>Return the number of bytes available in the read buffer of the
interface.Works only on APP3.x MCU target.</p>
<div class="language-text highlight"><pre><span></span><code>uint16_t coines_intf_available(enum coines_comm_intf intf);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>intf</code>: Type of interface (USB, COM, or BLE)</li>
</ul>
<h4 id="coines_intf_connected">coines_intf_connected<a class="headerlink" href="#coines_intf_connected" title="Permanent link">&para;</a></h4>
<p>Check if the interface is connected.Works only on APP3.x MCU target.</p>
<div class="language-text highlight"><pre><span></span><code>bool coines_intf_connected(enum coines_comm_intf intf);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>intf</code>: Type of interface (USB, COM, or BLE)</li>
</ul>
<h4 id="coines_flush_intf">coines_flush_intf<a class="headerlink" href="#coines_flush_intf" title="Permanent link">&para;</a></h4>
<p>Flush the write buffer.Works only on APP3.x MCU target.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_flush_intf(enum coines_comm_intf intf);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>intf</code>: Type of interface (USB, COM, or BLE)</li>
</ul>
<h4 id="coines_read_intf">coines_read_intf<a class="headerlink" href="#coines_read_intf" title="Permanent link">&para;</a></h4>
<p>Read data over the specified interface.Works only on APP3.x MCU target.</p>
<div class="language-text highlight"><pre><span></span><code>uint16_t coines_read_intf(enum coines_comm_intf intf, void *buffer, uint16_t len);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>intf</code>: Type of interface (USB, COM, or BLE)</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the buffer to store the data</p>
</li>
<li>
<p><code>len</code>: Length of the buffer</p>
</li>
</ul>
<h4 id="coines_write_intf">coines_write_intf<a class="headerlink" href="#coines_write_intf" title="Permanent link">&para;</a></h4>
<p>Write data over the specified interface.Works only on APP3.x MCU target.</p>
<div class="language-text highlight"><pre><span></span><code>uint16_t coines_write_intf(enum coines_comm_intf intf, void *buffer, uint16_t len);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>intf</code>: Type of interface (USB, COM, or BLE)</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the buffer storing the data</p>
</li>
<li>
<p><code>len</code>: Length of the buffer</p>
</li>
</ul>
<h4 id="coines_get_version">coines_get_version<a class="headerlink" href="#coines_get_version" title="Permanent link">&para;</a></h4>
<p>Returns pointer to COINES version string</p>
<div class="language-text highlight"><pre><span></span><code>char* coines_get_version(void);
</code></pre></div>
<h4 id="coines_soft_reset">coines_soft_reset<a class="headerlink" href="#coines_soft_reset" title="Permanent link">&para;</a></h4>
<p>Resets the device. After reset device jumps to the address specified in
makefile(APP_START_ADDRESS).</p>
<div class="language-text highlight"><pre><span></span><code>void coines_soft_reset(void);
</code></pre></div>
<h4 id="coines_read_temp_data">coines_read_temp_data<a class="headerlink" href="#coines_read_temp_data" title="Permanent link">&para;</a></h4>
<p>This API is used to read the temperature sensor data.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_read_temp_data(float *temp_data);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>temp_conv_data</code>: Buffer to retrieve the sensor data in degree
    Celsius.</li>
</ul>
<h4 id="coines_read_bat_status">coines_read_bat_status<a class="headerlink" href="#coines_read_bat_status" title="Permanent link">&para;</a></h4>
<p>This API is used to read the battery status.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_read_bat_status(uint16_t *bat_status_mv, uint8_t *bat_status_percent);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>bat_status_mv</code>: Buffer to retrieve the battery status in millivolt</p>
</li>
<li>
<p><code>bat_status_percent</code>: Buffer to retrieve the battery status in
    percentage</p>
</li>
</ul>
<h4 id="coines_ble_config">coines_ble_config<a class="headerlink" href="#coines_ble_config" title="Permanent link">&para;</a></h4>
<p>This API is used to configure BLE name and power. It should be called
before calling coines_open_comm_intf API.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_ble_config(struct coines_ble_config *ble_config);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>ble_config</code>: structure holding ble name and power details</li>
</ul>
<h4 id="coines_set_led">coines_set_led<a class="headerlink" href="#coines_set_led" title="Permanent link">&para;</a></h4>
<p>This API is used to set led state(on or off).</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_set_led(enum coines_led led,enum coines_led_state led_state);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>led</code>: led to which the state has to be set.</p>
</li>
<li>
<p><code>led_state</code>: state to be set to the given led.</p>
</li>
</ul>
<h4 id="coines_timer_config">coines_timer_config<a class="headerlink" href="#coines_timer_config" title="Permanent link">&para;</a></h4>
<p>This API is used to configure the hardware timer.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_timer_config(enum coines_timer_instance instance, void* handler);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>instance</code>: timer instance.</p>
</li>
<li>
<p><code>handler</code>: callback to be called when timer expires.</p>
</li>
</ul>
<h4 id="coines_timer_deconfig">coines_timer_deconfig<a class="headerlink" href="#coines_timer_deconfig" title="Permanent link">&para;</a></h4>
<p>This API is used to de-configure the hardware timer.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_timer_deconfig(enum coines_timer_instance instance);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>instance</code>: timer instance.</li>
</ul>
<h4 id="coines_timer_start">coines_timer_start<a class="headerlink" href="#coines_timer_start" title="Permanent link">&para;</a></h4>
<p>This API is used to start the configured hardware timer.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_timer_start(enum coines_timer_instance instance, uint32_t timeout);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>instance</code>: timer instance.</p>
</li>
<li>
<p><code>timeout</code>: timeout in microseconds.</p>
</li>
</ul>
<h4 id="coines_timer_stop">coines_timer_stop<a class="headerlink" href="#coines_timer_stop" title="Permanent link">&para;</a></h4>
<p>This API is used to stop the hardware timer.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_timer_stop(enum coines_timer_instance instance);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>instance</code>: timer instance.</li>
</ul>
<h4 id="coines_get_realtime_usec">coines_get_realtime_usec<a class="headerlink" href="#coines_get_realtime_usec" title="Permanent link">&para;</a></h4>
<p>This API is used to get the current counter(RTC) reference time in usec</p>
<div class="language-text highlight"><pre><span></span><code>uint32_t coines_get_realtime_usec(void);
</code></pre></div>
<h4 id="coines_delay_realtime_usec">coines_delay_realtime_usec<a class="headerlink" href="#coines_delay_realtime_usec" title="Permanent link">&para;</a></h4>
<p>This API is used to introduce delay based on high precision RTC(LFCLK
crystal) with the resolution of 30.517 usec.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_delay_realtime_usec(uint32_t period);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>period</code>: required delay in microseconds</li>
</ul>
<h4 id="coines_attach_timed_interrupt">coines_attach_timed_interrupt<a class="headerlink" href="#coines_attach_timed_interrupt" title="Permanent link">&para;</a></h4>
<p>Attaches a timed interrupt to a Multi-IO pin.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_attach_timed_interrupt(enum coines_multi_io_pin pin_number, void (*timed_interrupt_cb)(uint64_t,uint32_t,uint32_t), enum coines_pin_interrupt_mode int_mode);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>pin_number</code>: Multi-IO pin.</p>
</li>
<li>
<p><code>timed_interrupt_cb</code>: Name of the function to be called on detection
    of interrupt.</p>
</li>
<li>
<p><code>int_mode</code>: Trigger modes - change,rising edge,falling edge.</p>
</li>
</ul>
<h4 id="coines_detach_timed_interrupt">coines_detach_timed_interrupt<a class="headerlink" href="#coines_detach_timed_interrupt" title="Permanent link">&para;</a></h4>
<p>Detaches a timed interrupt from a Multi-IO pin.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_detach_timed_interrupt(enum coines_multi_io_pin pin_number);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>pin_number</code>: Multi-IO pin.</li>
</ul>
<h4 id="coines_echo_test">coines_echo_test<a class="headerlink" href="#coines_echo_test" title="Permanent link">&para;</a></h4>
<p>This API is used to test the communication.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_echo_test(uint8_t *data, uint16_t length);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>data</code>: Data to be sent for testing.</p>
</li>
<li>
<p><code>length</code>: Length of the data.</p>
</li>
</ul>
<h4 id="coines_shuttle_eeprom_write">coines_shuttle_eeprom_write<a class="headerlink" href="#coines_shuttle_eeprom_write" title="Permanent link">&para;</a></h4>
<p>This API is used to write the content into shuttle eeprom.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_shuttle_eeprom_write(uint16_t start_addr, uint8_t *buffer, uint16_t length);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>start_addr</code>: EEPROM write address.</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the buffer.</p>
</li>
<li>
<p><code>length</code>: Length of the buffer.</p>
</li>
</ul>
<h4 id="coines_shuttle_eeprom_read">coines_shuttle_eeprom_read<a class="headerlink" href="#coines_shuttle_eeprom_read" title="Permanent link">&para;</a></h4>
<p>This API is used to read the content from shuttle eeprom.</p>
<div class="language-text highlight"><pre><span></span><code>int16_t coines_shuttle_eeprom_read(uint16_t start_addr, uint8_t *buffer, uint16_t length);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>start_addr</code>: EEPROM read address.</p>
</li>
<li>
<p><code>buffer</code>: Pointer to the buffer.</p>
</li>
<li>
<p><code>length</code>: Length of the buffer.</p>
</li>
</ul>
<h4 id="coines_yield">coines_yield<a class="headerlink" href="#coines_yield" title="Permanent link">&para;</a></h4>
<p>This API can be defined to perform a task when yielded from an ongoing
blocking call.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_yield(void);
</code></pre></div>
<h4 id="coines_execute_critical_region">coines_execute_critical_region<a class="headerlink" href="#coines_execute_critical_region" title="Permanent link">&para;</a></h4>
<p>This API is used to execute the function inside critical region.</p>
<div class="language-text highlight"><pre><span></span><code>void coines_execute_critical_region(coines_critical_callback callback);
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>callback</code>: function to execute.</li>
</ul>
<h4 id="coinesScanBleDevices">coines_scan_ble_devices<a class="headerlink" href="#coinesScanBleDevices" title="Permanent link">&para;</a></h4>
<p>This API is used to connect to BLE Adapter and return list of BLE
peripherals found during BLE scan.</p>
<div class="language-text highlight"><pre><span></span><code>    int16_t coines_scan_ble_devices(struct ble_peripheral_info *ble_info, uint8_t *peripheral_count, size_t scan_timeout_ms)
</code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>ble_info</code>: array of struct containing found BLE peripheral
    information</p>
</li>
<li>
<p><code>peripheral_count</code>: number of BLE peripherals found</p>
</li>
<li>
<p><code>scan_timeout_ms</code>: timeout for BLE scan</p>
</li>
</ul>
<h2 id="coines-python-functions">COINES Python functions<a class="headerlink" href="#coines-python-functions" title="Permanent link">&para;</a></h2>
<p>As coinespy is only a wrapper on top of coinesAPI, the following API
documentation is limited to the wrapper only. Details about meaning of
variables and functionality can be found in the corresponding coinesAPI
documentation in the chapter above. The following function calls are
defined within the class <code>CoinesBoard</code>. Thus in order to access the
functions, the user has to create an object of that class first.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">import</span> <span class="nn">coinespy</span> <span class="k">as</span> <span class="nn">cpy</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    <span class="n">coinesboard</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CoinesBoard</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="coinespy-api-calls-interface-and-board-information">coinespy API calls: Interface and board information<a class="headerlink" href="#coinespy-api-calls-interface-and-board-information" title="Permanent link">&para;</a></h3>
<h4 id="open_comm_interface">open_comm_interface<a class="headerlink" href="#open_comm_interface" title="Permanent link">&para;</a></h4>
<p>Sets the communication interface between board and PC to USB, Serial or
BLE.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">open_comm_interface</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="n">CommInterface</span><span class="o">.</span><span class="n">USB</span><span class="p">,</span> <span class="n">serial_com_config</span><span class="p">:</span> <span class="n">SerialComConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">ble_com_config</span><span class="p">:</span> <span class="n">BleComConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorCodes</span>
</span></code></pre></div>
<p>For the definition of <code>CommInterface</code>, refer to
<a href="#CommInterface">15.3.6.3</a>{reference-type="ref"
reference="CommInterface"}.</p>
<h4 id="close_comm_interface">close_comm_interface<a class="headerlink" href="#close_comm_interface" title="Permanent link">&para;</a></h4>
<p>Disposes the resources used by the USB/serial/BLE communication.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">close_comm_interface</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorCodes</span>
</span></code></pre></div>
<h4 id="get_board_info">get_board_info<a class="headerlink" href="#get_board_info" title="Permanent link">&para;</a></h4>
<p>Obtains board specific information.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">BoardInfo</span> <span class="o">=</span> <span class="n">coinesboard</span><span class="o">.</span><span class="n">get_board_info</span><span class="p">()</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="c1"># Return:</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">BoardInfo</span><span class="o">.</span><span class="n">HardwareId</span>    <span class="c1"># Hardware ID</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">BoardInfo</span><span class="o">.</span><span class="n">SoftwareId</span>    <span class="c1"># Firmware version information</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="n">BoardInfo</span><span class="o">.</span><span class="n">Board</span>         <span class="c1"># Board type</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="n">BoardInfo</span><span class="o">.</span><span class="n">ShuttleID</span>     <span class="c1"># ID of shuttle, in case a shuttle is detected</span>
</span></code></pre></div>
<h4 id="scan_ble_devices">scan_ble_devices<a class="headerlink" href="#scan_ble_devices" title="Permanent link">&para;</a></h4>
<p>This API is used to connect to BLE Adapter and return list of BLE
peripherals found during BLE scan.</p>
<div class="language-text highlight"><pre><span></span><code>ble_info, peripheral_count  = coinesboard.scan_ble_devices(scan_timeout_ms=0) -&gt; Tuple[list, int]
</code></pre></div>
<p>For the definition of parameters, refer to
<a href="#coinesScanBleDevices">15.2.5.29</a>{reference-type="ref"
reference="coinesScanBleDevices"}.</p>
<h4 id="echo_test">echo_test<a class="headerlink" href="#echo_test" title="Permanent link">&para;</a></h4>
<p>This API is used to test the communication.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.echo_test(data: List[int]) -&gt; ErrorCodes
</code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>data</code>: Data to be sent for testing.</li>
</ul>
<h3 id="coinespy-api-calls-gpio-oriented-calls">coinespy API calls: GPIO oriented calls<a class="headerlink" href="#coinespy-api-calls-gpio-oriented-calls" title="Permanent link">&para;</a></h3>
<h4 id="set_pin_config">set_pin_config<a class="headerlink" href="#set_pin_config" title="Permanent link">&para;</a></h4>
<p>Configures the state, level and direction of a GPIO pin</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">set_pin_config</span><span class="p">(</span><span class="n">pin_number</span><span class="p">:</span> <span class="n">MultiIOPin</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="n">PinDirection</span><span class="p">,</span> <span class="n">output_state</span><span class="p">:</span> <span class="n">PinValue</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorCodes</span>
</span></code></pre></div>
<p>For the definition of <code>MultiIOPin</code>, refer to
<a href="#MultiIOPin" reference="MultiIOPin" reference-type="ref">15.3.6.8</a>.
For the definition of <code>PinDirection</code>, refer to
<a href="#PinDirection">15.3.6.1</a>{reference-type="ref"
reference="PinDirection"}. For <code>PinValue</code>, refer to
<a href="#PinValue" reference="PinValue" reference-type="ref">15.3.6.2</a>.</p>
<h4 id="get_pin_config">get_pin_config<a class="headerlink" href="#get_pin_config" title="Permanent link">&para;</a></h4>
<p>Obtains information regarding the Pin's state, level and direction.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">PinConfigInfo</span> <span class="o">=</span> <span class="n">coinesboard</span><span class="o">.</span><span class="n">get_pin_config</span><span class="p">(</span><span class="n">pin_number</span><span class="p">:</span> <span class="n">MultiIOPin</span><span class="p">)</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Return:</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="n">PinConfigInfo</span><span class="o">.</span><span class="n">direction</span>         <span class="c1"># 0: INPUT, 1: OUTPUT</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">PinConfigInfo</span><span class="o">.</span><span class="n">switch_state</span>       <span class="c1"># 0: OFF, 1: ON</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="n">PinConfigInfo</span><span class="o">.</span><span class="n">level</span>             <span class="c1"># 1: HIGH, 0: LOW</span>
</span></code></pre></div>
<h4 id="set_shuttleboard_vdd_vddio_config">set_shuttleboard_vdd_vddio_config<a class="headerlink" href="#set_shuttleboard_vdd_vddio_config" title="Permanent link">&para;</a></h4>
<p>Set the VDD and VDDIO voltage level.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.set_shuttleboard_vdd_vddio_config(vdd_val: float = None, vddio_val: float = None) -&gt; ErrorCodes

# Example: coinesboard.set_shuttleboard_vdd_vddio_config(3.3, 3.3)
</code></pre></div>
<h4 id="set_vdd">set_vdd<a class="headerlink" href="#set_vdd" title="Permanent link">&para;</a></h4>
<p>Set the VDD voltage level.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.set_vdd(vdd_val: float = None) -&gt; ErrorCodes

# Example: coinesboard.set_vdd(3.3)
</code></pre></div>
<h4 id="set_vddio">set_vddio<a class="headerlink" href="#set_vddio" title="Permanent link">&para;</a></h4>
<p>Set the VDDIO voltage level.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.set_vddio(vdd_val: float = None) -&gt; ErrorCodes

# Example: coinesboard.set_vddio(3.3)
</code></pre></div>
<h3 id="coinespy-api-calls-sensor-communication">coinespy API calls: Sensor communication<a class="headerlink" href="#coinespy-api-calls-sensor-communication" title="Permanent link">&para;</a></h3>
<p>For the definition of <code>SPIBus</code>, refer to
<a href="#SPIBus" reference="SPIBus" reference-type="ref">15.3.6.11</a>. For the
definition of <code>I2CBus</code>, refer to
<a href="#I2CBus" reference="I2CBus" reference-type="ref">15.3.6.10</a>.</p>
<h4 id="config_i2c_bus">config_i2c_bus<a class="headerlink" href="#config_i2c_bus" title="Permanent link">&para;</a></h4>
<p>Configures the I<sup>2</sup>C bus.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.config_i2c_bus(bus: I2CBus, i2c_address: int, i2c_mode: I2CMode) -&gt; ErrorCodes
</code></pre></div>
<p>For the definition of <code>I2CMode</code>, refer to
<a href="#I2CMode" reference="I2CMode" reference-type="ref">15.3.6.4</a>.</p>
<h4 id="config_spi_bus">config_spi_bus<a class="headerlink" href="#config_spi_bus" title="Permanent link">&para;</a></h4>
<p>Configures the SPI bus of the board.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.config_spi_bus(bus: SPIBus, cs_pin: MultiIOPin, spi_speed=SPISpeed, spi_mode=SPIMode) -&gt; ErrorCodes
</code></pre></div>
<p>For the definition of <code>MultiIOPin</code>, refer to
<a href="#MultiIOPin" reference="MultiIOPin" reference-type="ref">15.3.6.8</a>.
For the definition of <code>SPISpeed</code>, refer to
<a href="#SPISpeed" reference="SPISpeed" reference-type="ref">15.3.6.5</a>. For
the definition of <code>SPIMode</code>, refer to
<a href="#SPIMode" reference="SPIMode" reference-type="ref">15.3.6.7</a>.</p>
<h4 id="deconfig_i2c_bus">deconfig_i2c_bus<a class="headerlink" href="#deconfig_i2c_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to de-configure the I<sup>2</sup>C bus</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.deconfig_i2c_bus(bus: I2CBus) -&gt; ErrorCodes
</code></pre></div>
<h4 id="deconfig_spi_bus">deconfig_spi_bus<a class="headerlink" href="#deconfig_spi_bus" title="Permanent link">&para;</a></h4>
<p>This API is used to de-configure the SPI bus</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.deconfig_spi_bus(bus: SPIBus) -&gt; ErrorCodes
</code></pre></div>
<h4 id="write_i2c">write_i2c<a class="headerlink" href="#write_i2c" title="Permanent link">&para;</a></h4>
<p>Writes 8-bit register data to the I<sup>2</sup>C</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.write_i2c(bus: I2CBus, register_address: int, register_value: int, sensor_interface_detail: int = None) -&gt; ErrorCodes
</code></pre></div>
<p>For the definition of parameters, refer to
<a href="#CoinesWriteI2c">15.2.3.7</a>{reference-type="ref"
reference="CoinesWriteI2c"}.</p>
<h4 id="read_i2c">read_i2c<a class="headerlink" href="#read_i2c" title="Permanent link">&para;</a></h4>
<p>Reads 8-bit register data from the I<sup>2</sup>C</p>
<div class="language-text highlight"><pre><span></span><code>register_data = coinesboard.read_i2c(bus: I2CBus, register_address: int, number_of_reads=1, sensor_interface_detail: int = None)
</code></pre></div>
<p>For the definition of parameters, refer to
<a href="#CoinesReadI2c">15.2.3.8</a>{reference-type="ref"
reference="CoinesReadI2c"}.</p>
<h4 id="write_spi">write_spi<a class="headerlink" href="#write_spi" title="Permanent link">&para;</a></h4>
<p>Writes 8-bit register data to the SPI device</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.write_spi(bus: SPIBus, register_address: int, register_value: int, sensor_interface_detail: int = None) -&gt; ErrorCodes
</code></pre></div>
<p>For the definition of parameters, refer to
<a href="#CoinesWriteSpi">15.2.3.11</a>{reference-type="ref"
reference="CoinesWriteSpi"}.</p>
<h4 id="read_spi">read_spi<a class="headerlink" href="#read_spi" title="Permanent link">&para;</a></h4>
<p>Reads 8-bit register data from the SPI device.</p>
<div class="language-text highlight"><pre><span></span><code>register_data = coinesboard.read_spi(bus: SPIBus, register_address: int, number_of_reads=1, sensor_interface_detail: int = None)
</code></pre></div>
<p>For the definition of parameters, refer to
<a href="#CoinesReadSpi">15.2.3.12</a>{reference-type="ref"
reference="CoinesReadSpi"}.</p>
<h4 id="delay_milli_sec">delay_milli_sec<a class="headerlink" href="#delay_milli_sec" title="Permanent link">&para;</a></h4>
<p>Introduces delay in millisecond.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.delay_milli_sec(time_in_milli_sec=100)
</code></pre></div>
<h4 id="delay_micro_sec">delay_micro_sec<a class="headerlink" href="#delay_micro_sec" title="Permanent link">&para;</a></h4>
<p>Introduces delay in microsecond.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.delay_micro_sec(time_in_micro_sec=1)
</code></pre></div>
<h3 id="coinespy-api-calls-streaming-feature">coinespy API calls: Streaming feature<a class="headerlink" href="#coinespy-api-calls-streaming-feature" title="Permanent link">&para;</a></h3>
<h4 id="config_streaming">config_streaming<a class="headerlink" href="#config_streaming" title="Permanent link">&para;</a></h4>
<p>Sets the configuration for streaming sensor data.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">config_streaming</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="n">stream_config</span><span class="p">:</span> <span class="n">StreamingConfig</span><span class="p">,</span> <span class="n">data_blocks</span><span class="p">:</span> <span class="n">StreamingBlocks</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorCodes</span>
</span></code></pre></div>
<p>Arguments:</p>
<ul>
<li>
<p><code>sensor_id</code>: An integer number that can be used as identifier/index
    to the sensor data that will be streamed for this setting</p>
</li>
<li>
<p><code>stream_config</code>: Contains information regarding interface settings
    and streaming configuration.</p>
</li>
<li>
<p><code>data_blocks</code>: Contains information regarding numbers of blocks to
    read, register address and size for each block.</p>
</li>
</ul>
<p>Note: The below parameters should always be set:</p>
<ul>
<li>
<p><code>data_blocks.NoOfBlocks</code>: number of blocks to stream (must at least
    be one)</p>
</li>
<li>
<p>For each block b:</p>
<ul>
<li>
<p><code>data_blocks.RegStartAddr[b]</code>: start address of the block in the
    register map</p>
</li>
<li>
<p><code>data_blocks.NoOfDataBytes[b]</code>: number of bytes to read,
    starting from the start address</p>
</li>
</ul>
</li>
</ul>
<p>For reading data from I<sup>2</sup>C bus,then set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.Intf = cpy.SensorInterface.I2C.value</code></p>
</li>
<li>
<p><code>stream_config.I2CBus</code>: I<sup>2</sup>C bus (in case of APP2.0 and APP3.x,
    this is always\
    <code>cpy.I2CBus.BUS_I2C_0.value</code>)</p>
</li>
<li>
<p><code>stream_config.DevAddr</code>: I<sup>2</sup>C address of the sensor</p>
</li>
</ul>
<p>For reading data from SPI bus, then set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.Intf = cpy.SensorInterface.SPI.value;</code></p>
</li>
<li>
<p><code>stream_config.SPIBus</code>: SPI bus (in case of APP2.0 and APP3.x, this
    is always\
    <code>cpy.SPIBus.BUS_SPI_0.value</code>)</p>
</li>
<li>
<p><code>stream_config.CSPin</code>: CS pin of the sensor, information can be
    obtained from the shuttle board documentation for the sensor.</p>
</li>
<li>
<p><code>stream_config.SPIType</code>: 0 : 8-bit SPI; 1 : 16-bit SPI</p>
</li>
</ul>
<p>When polling mode is requested, set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.SamplingUnits</code>: either milliseconds or microseconds.
    Refer to <a href="#SamplingUnits">15.3.6.15</a>{reference-type="ref"
    reference="SamplingUnits"}.</p>
</li>
<li>
<p><code>stream_config.SamplingTime</code>: sampling period in the unit as defined
    in\
    <code>stream_config.SamplingUnits</code></p>
</li>
</ul>
<p>When interrupt mode is requested, set the below parameters:</p>
<ul>
<li>
<p><code>stream_config.IntPin</code>: pin of the interrupt which shall trigger the
    sensor read-out. If the interrupt output of the sensor is used, the
    required information about the pin number can be obtained from the
    shuttle board documentation for the sensor.</p>
</li>
<li>
<p><code>stream_config.IntTimeStamp</code>: it can be configured if the sensor
    data is tagged with a timestamp - 1 or not - 0.</p>
</li>
<li>
<p><code>stream_config.HwPinState</code>: State of the hardware pin connected to
    the interrupt line - 0/1 : Low/high</p>
</li>
</ul>
<p>Below parameters are common for both streaming types:</p>
<ul>
<li>
<p><code>stream_config.IntlineCount</code>: Number of interrupt lines to be used
    for monitoring interrupts.</p>
</li>
<li>
<p><code>stream_config.IntlineInfo</code>: List of pin numbers that correspond to
    interrupt lines being used for interrupt monitoring.</p>
</li>
<li>
<p><code>stream_config.ClearOnWrite</code>: 0/1 : Disable/enable \"clear on
    write\" feature</p>
</li>
</ul>
<p>The below parameters should be set only when stream_config.ClearOnWrite
= 1:</p>
<ul>
<li>
<p><code>stream_config.ClearOnWriteConfig.StartAddress</code>: Address of the
    sensor register at which the process of clearOnWrite should
    initiate.</p>
</li>
<li>
<p><code>stream_config.ClearOnWriteConfig.DummyByte</code>: Number of padding
    bytes that must be added before clearing the bytes starting from the
    designated address.</p>
</li>
<li>
<p><code>stream_config.ClearOnWriteConfig.NumBytesToClear</code>: Number of bytes
    that need to be cleared.</p>
</li>
</ul>
<p>Below is the Python code snippet for interrupt streaming</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># Store streaming settings in local variables</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">accel_stream_settings</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    <span class="n">I2C_ADDR_PRIMARY</span><span class="o">=</span><span class="mh">0x18</span><span class="p">,</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    <span class="n">NO_OF_BLOCKS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>    <span class="n">REG_X_LSB</span><span class="o">=</span> <span class="p">[</span><span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">],</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>    <span class="n">NO_OF_DATA_BYTES</span><span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>    <span class="n">CHANNEL_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>    <span class="n">CS_PIN</span><span class="o">=</span><span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_8</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span class="n">INT_PIN</span><span class="o">=</span><span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_21</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    <span class="n">INT_TIME_STAMP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="p">)</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="n">gyro_stream_settings</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>    <span class="n">I2C_ADDR_PRIMARY</span><span class="o">=</span><span class="mh">0x68</span><span class="p">,</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>    <span class="n">NO_OF_BLOCKS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>    <span class="n">REG_X_LSB</span><span class="o">=</span> <span class="p">[</span><span class="mh">0x02</span><span class="p">,</span><span class="mh">0x00</span><span class="p">],</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>    <span class="n">NO_OF_DATA_BYTES</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>    <span class="n">CHANNEL_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>    <span class="n">CS_PIN</span><span class="o">=</span><span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_14</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>    <span class="n">INT_PIN</span><span class="o">=</span><span class="n">cpy</span><span class="o">.</span><span class="n">MultiIOPin</span><span class="o">.</span><span class="n">SHUTTLE_PIN_22</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>    <span class="n">INT_TIME_STAMP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="p">)</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="c1"># set the config_streaming parameters</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="n">stream_config</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">StreamingConfig</span><span class="p">()</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="n">data_blocks</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">StreamingBlocks</span><span class="p">()</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span> <span class="o">==</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SensorInterface</span><span class="o">.</span><span class="n">I2C</span><span class="p">:</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">Intf</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SensorInterface</span><span class="o">.</span><span class="n">I2C</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">I2CBus</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">I2CBus</span><span class="o">.</span><span class="n">BUS_I2C_0</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">DevAddr</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;I2C_ADDR_PRIMARY&quot;</span><span class="p">]</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a><span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span> <span class="o">==</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SensorInterface</span><span class="o">.</span><span class="n">SPI</span><span class="p">:</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">Intf</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SensorInterface</span><span class="o">.</span><span class="n">SPI</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">SPIBus</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SPIBus</span><span class="o">.</span><span class="n">BUS_SPI_0</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a>    <span class="n">stream_config</span><span class="o">.</span><span class="n">CSPin</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;CS_PIN&quot;</span><span class="p">]</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a><span class="k">if</span> <span class="n">sensor_type</span> <span class="o">==</span> <span class="n">bmi08x</span><span class="o">.</span><span class="n">SensorType</span><span class="o">.</span><span class="n">ACCEL</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span> <span class="o">==</span> <span class="n">cpy</span><span class="o">.</span><span class="n">SensorInterface</span><span class="o">.</span><span class="n">SPI</span><span class="p">:</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a>    <span class="c1"># extra dummy byte for SPI</span>
</span><span id="__span-23-39"><a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a>    <span class="n">dummy_byte_offset</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-23-40"><a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-23-41"><a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a>    <span class="n">dummy_byte_offset</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-23-42"><a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a>
</span><span id="__span-23-43"><a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a><span class="n">data_blocks</span><span class="o">.</span><span class="n">NoOfBlocks</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;NO_OF_BLOCKS&quot;</span><span class="p">]</span>
</span><span id="__span-23-44"><a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">data_blocks</span><span class="o">.</span><span class="n">NoOfBlocks</span><span class="p">):</span>
</span><span id="__span-23-45"><a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a>    <span class="n">data_blocks</span><span class="o">.</span><span class="n">RegStartAddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;REG_X_LSB&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-23-46"><a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a>    <span class="n">data_blocks</span><span class="o">.</span><span class="n">NoOfDataBytes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;NO_OF_DATA_BYTES&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">dummy_byte_offset</span>
</span><span id="__span-23-47"><a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a>
</span><span id="__span-23-48"><a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a><span class="n">stream_config</span><span class="o">.</span><span class="n">IntTimeStamp</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;INT_TIME_STAMP&quot;</span><span class="p">]</span>
</span><span id="__span-23-49"><a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a><span class="n">stream_config</span><span class="o">.</span><span class="n">IntPin</span> <span class="o">=</span> <span class="n">sensor</span><span class="p">[</span><span class="s2">&quot;INT_PIN&quot;</span><span class="p">]</span>
</span><span id="__span-23-50"><a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a>
</span><span id="__span-23-51"><a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a><span class="c1"># call config_streaming API for each sensor to configure the streaming settings</span>
</span><span id="__span-23-52"><a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a><span class="n">ret</span> <span class="o">=</span> <span class="n">coinesboard</span><span class="o">.</span><span class="n">config_streaming</span><span class="p">(</span>
</span><span id="__span-23-53"><a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a>    <span class="n">accel_sensor_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">accel_stream_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">accel_data_blocks</span><span class="p">)</span>
</span><span id="__span-23-54"><a id="__codelineno-23-54" name="__codelineno-23-54" href="#__codelineno-23-54"></a><span class="n">ret</span> <span class="o">=</span> <span class="n">coinesboard</span><span class="o">.</span><span class="n">config_streaming</span><span class="p">(</span>
</span><span id="__span-23-55"><a id="__codelineno-23-55" name="__codelineno-23-55" href="#__codelineno-23-55"></a>    <span class="n">gyro_sensor_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">accel_stream_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">accel_data_blocks</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="start_stop_streaming">start_stop_streaming<a class="headerlink" href="#start_stop_streaming" title="Permanent link">&para;</a></h4>
<p>Starts or stops sensor data streaming.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">start_stop_streaming</span><span class="p">(</span><span class="n">stream_mode</span><span class="p">:</span> <span class="n">StreamingMode</span><span class="p">,</span> <span class="n">start_stop</span><span class="p">:</span> <span class="n">StreamingState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorCodes</span>
</span></code></pre></div>
<p>For the definition of <code>StreamingMode</code>, refer to
<a href="#StreamingMode">15.3.6.13</a>{reference-type="ref"
reference="StreamingMode"}. For the definition of <code>StreamingState</code>,
refer to <a href="#StreamingState">15.3.6.14</a>{reference-type="ref"
reference="StreamingState"}.</p>
<h4 id="read_stream_sensor_data">read_stream_sensor_data<a class="headerlink" href="#read_stream_sensor_data" title="Permanent link">&para;</a></h4>
<p>Reads the data streamed from the sensor.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">coinesboard</span><span class="o">.</span><span class="n">read_stream_sensor_data</span><span class="p">(</span><span class="n">sensor_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">number_of_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="n">buffer_size</span><span class="o">=</span><span class="n">STREAM_RSP_BUF_SIZE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ErrorCodes</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span></code></pre></div>
<p>Return:\
Tuple of ErrorCodes, data and valid_samples_count For the detailed
definition of parameters, refer to
<a href="#coinesReadStreamSensorData">15.2.4.3</a>{reference-type="ref"
reference="coinesReadStreamSensorData"}.</p>
<h3 id="coinespy-api-calls-other-useful-apis">coinespy API calls: Other useful APIs<a class="headerlink" href="#coinespy-api-calls-other-useful-apis" title="Permanent link">&para;</a></h3>
<h4 id="flush_interface">flush_interface<a class="headerlink" href="#flush_interface" title="Permanent link">&para;</a></h4>
<p>Flush the write buffer.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.flush_interface()
</code></pre></div>
<h4 id="soft_reset">soft_reset<a class="headerlink" href="#soft_reset" title="Permanent link">&para;</a></h4>
<p>Resets the device.</p>
<div class="language-text highlight"><pre><span></span><code>coinesboard.soft_reset()
</code></pre></div>
<h3 id="definition-of-constants">Definition of constants<a class="headerlink" href="#definition-of-constants" title="Permanent link">&para;</a></h3>
<h4 id="PinDirection">PinDirection<a class="headerlink" href="#PinDirection" title="Permanent link">&para;</a></h4>
<p>Pin mode definitions</p>
<div class="language-text highlight"><pre><span></span><code>class PinDirection:
    INPUT = 0  # COINES_PIN_DIRECTION_IN = 0
    OUTPUT = 1
</code></pre></div>
<h4 id="PinValue">PinValue<a class="headerlink" href="#PinValue" title="Permanent link">&para;</a></h4>
<p>Pin level definitions</p>
<div class="language-text highlight"><pre><span></span><code>class PinValue:
    LOW = 0  # COINES_PIN_VALUE_LOW = 0
    HIGH = 1
</code></pre></div>
<h4 id="CommInterface">CommInterface<a class="headerlink" href="#CommInterface" title="Permanent link">&para;</a></h4>
<p>Definition of Communication interface</p>
<div class="language-text highlight"><pre><span></span><code>class CommInterface:
    USB = 0
    SERIAL = 1
    BLE = 2
</code></pre></div>
<h4 id="I2CMode">I2CMode<a class="headerlink" href="#I2CMode" title="Permanent link">&para;</a></h4>
<p>Definition of the speed of I2C bus.</p>
<div class="language-text highlight"><pre><span></span><code>class I2CMode:
    STANDARD_MODE = 0 # Standard mode - 100kHz
    FAST_MODE = 1 # Fast mode - 400kHz
    SPEED_3_4_MHZ = 2 # High Speed mode - 3.4 MHz
    SPEED_1_7_MHZ = 3 # High Speed mode 2 - 1.7 MHz
</code></pre></div>
<h4 id="SPISpeed">SPISpeed<a class="headerlink" href="#SPISpeed" title="Permanent link">&para;</a></h4>
<p>Definition of the speed of SPI bus.</p>
<div class="language-text highlight"><pre><span></span><code>class SPISpeed:
    SPI_10_MHZ = 6
    SPI_7_5_MHZ = 8
    SPI_6_MHZ = 10
    SPI_5_MHZ = 12
    SPI_3_75_MHZ = 16
    SPI_3_MHZ = 20
    SPI_2_5_MHZ = 24
    SPI_2_MHZ = 30
    SPI_1_5_MHZ = 40
    SPI_1_25_MHZ = 48
    SPI_1_2_MHZ = 50
    SPI_1_MHZ = 60
    SPI_750_KHZ = 80
    SPI_600_KHZ = 100
    SPI_500_KHZ = 120
    SPI_400_KHZ = 150
    SPI_300_KHZ = 200
    SPI_250_KHZ = 240
</code></pre></div>
<h4 id="SPITransferBits">SPITransferBits<a class="headerlink" href="#SPITransferBits" title="Permanent link">&para;</a></h4>
<p>Definition of the SPI bits.</p>
<div class="language-text highlight"><pre><span></span><code>class SPITransferBits:
    SPI8BIT = 8 # 8 bit register read/write
    SPI16BIT = 16 # 16 bit register read/write
</code></pre></div>
<h4 id="SPIMode">SPIMode<a class="headerlink" href="#SPIMode" title="Permanent link">&para;</a></h4>
<p>Definition of the SPI mode.</p>
<div class="language-text highlight"><pre><span></span><code>class SPIMode:
    MODE0 = 0x00 # SPI Mode 0: CPOL=0; CPHA=0
    MODE1 = 0x01 # SPI Mode 1: CPOL=0; CPHA=1
    MODE2 = 0x02 # SPI Mode 2: CPOL=1; CPHA=0
    MODE3 = 0x03 # SPI Mode 3: CPOL=1; CPHA=1
</code></pre></div>
<h4 id="MultiIOPin">MultiIOPin<a class="headerlink" href="#MultiIOPin" title="Permanent link">&para;</a></h4>
<p>Definition of the shuttle board pin(s)</p>
<div class="language-text highlight"><pre><span></span><code>class MultiIOPin(Enum):
    SHUTTLE_PIN_7 = 0x09 # CS pin
    SHUTTLE_PIN_8 = 0x05 # Multi-IO 5
    SHUTTLE_PIN_9 = 0x00 # Multi-IO 0
    SHUTTLE_PIN_14 = 0x01 # Multi-IO 1
    SHUTTLE_PIN_15 = 0x02 # Multi-IO 2
    SHUTTLE_PIN_16 = 0x03 # Multi-IO 3
    SHUTTLE_PIN_19 = 0x08 # Multi-IO 8
    SHUTTLE_PIN_20 = 0x06 # Multi-IO 6
    SHUTTLE_PIN_21 = 0x07 # Multi-IO 7
    SHUTTLE_PIN_22 = 0x04 # Multi-IO 4
    SHUTTLE_PIN_SDO = 0x1F

    # APP3.x pins
    MINI_SHUTTLE_PIN_1_4 = 0x10  # GPIO0
    MINI_SHUTTLE_PIN_1_5 = 0x11  # GPIO1
    MINI_SHUTTLE_PIN_1_6 = 0x12  # GPIO2/INT1
    MINI_SHUTTLE_PIN_1_7 = 0x13  # GPIO3/INT2
    MINI_SHUTTLE_PIN_2_5 = 0x14  # GPIO4
    MINI_SHUTTLE_PIN_2_6 = 0x15  # GPIO5
    MINI_SHUTTLE_PIN_2_1 = 0x16  # CS
    MINI_SHUTTLE_PIN_2_3 = 0x17  # SDO
    MINI_SHUTTLE_PIN_2_7 = 0x1D  # GPIO6
    MINI_SHUTTLE_PIN_2_8 = 0x1E  # GPIO7
</code></pre></div>
<h4 id="SensorInterface">SensorInterface<a class="headerlink" href="#SensorInterface" title="Permanent link">&para;</a></h4>
<p>To define Sensor interface.</p>
<div class="language-text highlight"><pre><span></span><code>class SensorInterface(Enum):
    SPI = 0
    I2C = 1
</code></pre></div>
<h4 id="I2CBus">I2CBus<a class="headerlink" href="#I2CBus" title="Permanent link">&para;</a></h4>
<p>Used to define the I2C type.</p>
<div class="language-text highlight"><pre><span></span><code>    class I2CBus(Enum):
    BUS_I2C_0 = 0
    BUS_I2C_1 = 1
    BUS_I2C_MAX = 2
</code></pre></div>
<h4 id="SPIBus">SPIBus<a class="headerlink" href="#SPIBus" title="Permanent link">&para;</a></h4>
<p>Used to define the SPI type.</p>
<div class="language-text highlight"><pre><span></span><code>    class SPIBus(Enum):
    BUS_SPI_0 = 0
    BUS_SPI_1 = 1
    BUS_SPI_MAX = 2
</code></pre></div>
<h4 id="PinInterruptMode">PinInterruptMode<a class="headerlink" href="#PinInterruptMode" title="Permanent link">&para;</a></h4>
<p>Defines Pin interrupt modes.</p>
<div class="language-text highlight"><pre><span></span><code>class PinInterruptMode(Enum):
    # Trigger interrupt on pin state change
    PIN_INTERRUPT_CHANGE = 0
    # Trigger interrupt when pin changes from low to high
    PIN_INTERRUPT_RISING_EDGE = 1
    # Trigger interrupt when pin changes from high to low
    PIN_INTERRUPT_FALLING_EDGE = 2
    PIN_INTERRUPT_MODE_MAXIMUM = 4
</code></pre></div>
<h4 id="StreamingMode">StreamingMode<a class="headerlink" href="#StreamingMode" title="Permanent link">&para;</a></h4>
<p>Streaming mode definitions</p>
<div class="language-text highlight"><pre><span></span><code>class StreamingMode:
    STREAMING_MODE_POLLING = 0    # Polling mode streaming
    STREAMING_MODE_INTERRUPT = 1  # Interrupt mode streaming
</code></pre></div>
<h4 id="StreamingState">StreamingState<a class="headerlink" href="#StreamingState" title="Permanent link">&para;</a></h4>
<p>Streaming state definitions</p>
<div class="language-text highlight"><pre><span></span><code>class StreamingState:
    STREAMING_START = 1
    STREAMING_STOP = 0
</code></pre></div>
<h4 id="SamplingUnits">SamplingUnits<a class="headerlink" href="#SamplingUnits" title="Permanent link">&para;</a></h4>
<p>Sampling Unit definitions</p>
<div class="language-text highlight"><pre><span></span><code>class SamplingUnits:
    SAMPLING_TIME_IN_MICRO_SEC = 0x01  # sampling unit in micro second
    SAMPLING_TIME_IN_MILLI_SEC = 0x02  # sampling unit in milli second
</code></pre></div>
<h2 id="error-codes">Error Codes<a class="headerlink" href="#error-codes" title="Permanent link">&para;</a></h2>
<p>Error codes are not (always) returned by the different function calls.
Internally, a <code>error_code</code> variable is maintained which is updated after
the function call. It can be read out and checked by the user
afterwards.</p>
<p>C Example</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;coines.h&quot;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coines_open_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_code</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">COINES_SUCCESS</span><span class="p">)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">err_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_coines_error_str</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">err_str</span><span class="p">);</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="n">error_code</span><span class="p">);</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="n">coines_close_comm_intf</span><span class="p">(</span><span class="n">COINES_COMM_INTF_USB</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="p">}</span>
</span></code></pre></div>
<p>Python Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">import</span> <span class="nn">coinespy</span> <span class="k">as</span> <span class="nn">cpy</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">board</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">.</span><span class="n">CoinesBoard</span><span class="p">()</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="n">board</span><span class="o">.</span><span class="n">open_comm_interface</span><span class="p">(</span><span class="n">cpy</span><span class="o">.</span><span class="n">CommInterface</span><span class="o">.</span><span class="n">USB</span><span class="p">)</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    <span class="n">board</span><span class="o">.</span><span class="n">close_comm_interface</span><span class="p">()</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="k">except</span><span class="p">:</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Could not connect to board: </span><span class="si">{</span><span class="n">board</span><span class="o">.</span><span class="n">error_code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    <span class="n">exit</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">error_code</span><span class="p">)</span>
</span></code></pre></div>
<p>Error code definitions</p>
<div class="language-text highlight"><pre><span></span><code>    COINES_SUCCESS = 0
    COINES_E_FAILURE = -1
    COINES_E_COMM_IO_ERROR = -2
    COINES_E_COMM_INIT_FAILED = -3
    COINES_E_UNABLE_OPEN_DEVICE = -4
    COINES_E_DEVICE_NOT_FOUND = -5
    COINES_E_UNABLE_CLAIM_INTERFACE = -6
    COINES_E_MEMORY_ALLOCATION = -7
    COINES_E_NOT_SUPPORTED = -8
    COINES_E_NULL_PTR = -9
    COINES_E_COMM_WRONG_RESPONSE = -10
    COINES_E_SPI16BIT_NOT_CONFIGURED = -11
    COINES_E_SPI_INVALID_BUS_INTERFACE = -12
    COINES_E_SPI_CONFIG_EXIST = -13
    COINES_E_SPI_BUS_NOT_ENABLED = -14
    COINES_E_SPI_CONFIG_FAILED = -15
    COINES_E_I2C_INVALID_BUS_INTERFACE = -16
    COINES_E_I2C_BUS_NOT_ENABLED = -17
    COINES_E_I2C_CONFIG_FAILED = -18
    COINES_E_I2C_CONFIG_EXIST = -19
    COINES_E_TIMER_INIT_FAILED = -20
    COINES_E_TIMER_INVALID_INSTANCE = -21
    COINES_E_TIMER_CC_CHANNEL_NOT_AVAILABLE = -22
    COINES_E_EEPROM_RESET_FAILED = -23
    COINES_E_EEPROM_READ_FAILED = -24
    COINES_E_INIT_FAILED = -25
    COINES_E_STREAM_NOT_CONFIGURED = -26
    COINES_E_STREAM_INVALID_BLOCK_SIZE = -27
    COINES_E_STREAM_SENSOR_ALREADY_CONFIGURED = -28
    COINES_E_STREAM_CONFIG_MEMORY_FULL = -29
    COINES_E_INVALID_PAYLOAD_LEN = -30
    COINES_E_CHANNEL_ALLOCATION_FAILED = -31
    COINES_E_CHANNEL_DE_ALLOCATION_FAILED = -32
    COINES_E_CHANNEL_ASSIGN_FAILED = -33
    COINES_E_CHANNEL_ENABLE_FAILED = -34
    COINES_E_CHANNEL_DISABLE_FAILED = -35
    COINES_E_INVALID_PIN_NUMBER = -36
    COINES_E_MAX_SENSOR_COUNT_REACHED = -37
    COINES_E_EEPROM_WRITE_FAILED = -38
    COINES_E_INVALID_EEPROM_RW_LENGTH = -39
    COINES_E_INVALID_SCOM_CONFIG = -40
    COINES_E_INVALID_BLE_CONFIG = -41
    COINES_E_SCOM_PORT_IN_USE = -42
    COINES_E_UART_INIT_FAILED = -43
    COINES_E_UART_WRITE_FAILED = -44
    COINES_E_UART_INSTANCE_NOT_SUPPORT = -45
    COINES_E_BLE_ADAPTOR_NOT_FOUND = -46
    COINES_E_ADAPTER_BLUETOOTH_NOT_ENABLED = -47
    COINES_E_BLE_PERIPHERAL_NOT_FOUND = -48
    COINES_E_BLE_LIBRARY_NOT_LOADED = -49
    COINES_E_APP_BOARD_BLE_NOT_FOUND = -50
    COINES_E_BLE_COMM_FAILED = -51
    COINES_E_INCOMPATIBLE_FIRMWARE = -52
    COINES_E_UNDEFINED_CODE = -100
</code></pre></div>
<h2 id="coines-sdk-structure">COINES SDK structure<a class="headerlink" href="#coines-sdk-structure" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>coines-api - Contains source code for low-level interface to Bosch
    Sensortec's Engineering boards</p>
</li>
<li>
<p>doc - Contains COINES SDK user manual</p>
</li>
<li>
<p>driver - Contains USB driver for Application boards</p>
</li>
<li>
<p>examples - Contains C and python examples</p>
</li>
<li>
<p>installer_scripts - Contains Windows batch files that are used
    internally for install and uninstall functionalities</p>
</li>
<li>
<p>libraries and thirdparty - Contains libraries and SDKs used for
    communication APIs</p>
</li>
<li>
<p>tools - Contains tools for Application switch, Firmware update and
    BLE connect</p>
</li>
</ul>
<figure>
<div class="center">
<img src="coinesAPI_images/COINES_file_structure.png"
style="width:40.0%" />
</div>
<figcaption>COINES SDK file structure</figcaption>
</figure>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="/GITHUB_WORK/pdf/coines_documentation.pdf" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/boschMEMS" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "content.code.copy", "content.action.edit"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>